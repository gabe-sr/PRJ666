(this.webpackJsonppsicoworking=this.webpackJsonppsicoworking||[]).push([[0],{311:function(e,t,a){},312:function(e,t,a){},337:function(e,t,a){},338:function(e,t,a){},361:function(e,t,a){},362:function(e,t,a){},363:function(e,t,a){},467:function(e,t,a){},470:function(e,t,a){},471:function(e,t,a){},502:function(e,t){},504:function(e,t){},515:function(e,t){},517:function(e,t){},544:function(e,t){},546:function(e,t){},547:function(e,t){},552:function(e,t){},554:function(e,t){},560:function(e,t){},562:function(e,t){},581:function(e,t){},593:function(e,t){},596:function(e,t){},601:function(e,t,a){},602:function(e,t,a){},603:function(e,t,a){},604:function(e,t,a){},605:function(e,t,a){},606:function(e,t,a){},607:function(e,t,a){},608:function(e,t,a){},609:function(e,t,a){},610:function(e,t,a){},611:function(e,t,a){},612:function(e,t,a){},613:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),s=a(61),r=a.n(s),i=(a(337),a(21)),o=a(20),l=a(4),d=a(619),j=(a(338),a(1)),u=function(e){var t=e.userData;Object(c.useEffect)((function(){window.scrollTo(0,0)}),[]);var a=function(e){var t=e.userData,a=t.first_name,c=t.last_name;return Object(j.jsxs)("div",{className:"text-secondary",children:[Object(j.jsx)("h2",{children:"Welcome ".concat(a," ").concat(c)}),Object(j.jsx)("hr",{}),Object(j.jsxs)(d.a,{className:"text-left",children:[Object(j.jsx)("h4",{children:"Messages"}),Object(j.jsx)("p",{children:"You have no new messages."})]}),Object(j.jsx)("br",{}),Object(j.jsx)("hr",{}),Object(j.jsxs)(d.a,{className:"text-left",children:[Object(j.jsx)("h4",{children:"Latest Bookings"}),Object(j.jsx)("p",{children:"You have no bookings."})]})]})};return Object(j.jsx)(a,{userData:t})},b=a(8),m=a.n(b),h=a(15),O=a(623),x=a(107),p=a(624),f=a(647),g=a(625),v=a(648),y=a(627),k=a(106),w=a.n(k),N=(a(215),a(12)),C=a.n(N),S=a(626),_=a(315),T=a(145),R=a(640),D=a(3),P=a(622),B=a(314),q=a(620),E=a(621),M=[8,9,10,11,13,14,15,16,17,18,19],A="toggle",F="select",L="occupy",z="occupy_maintenance",I="available",G=function(e,t){switch(t.type){case A:return e.map((function(e){return e.id===t.payload.id?Object(D.a)(Object(D.a)({},e),{},{active:!e.active}):!1===e.disabled?Object(D.a)(Object(D.a)({},e),{},{active:!1}):e}));case L:var a=0;return e.map((function(e){return e.id===parseInt(t.payload.id[a])?(a++,Object(D.a)(Object(D.a)({},e),{},{disabled:!0,active:!0,variant:"secondary"})):Object(D.a)(Object(D.a)({},e),{},{disabled:!1,active:!1,variant:"outline-primary"})}));case z:var c=0;return e.map((function(e){return e.id===parseInt(t.payload.id[c])?(c++,Object(D.a)(Object(D.a)({},e),{},{disabled:!1,active:!0,variant:"secondary"})):Object(D.a)(Object(D.a)({},e),{},{disabled:!1,active:!1,variant:"outline-primary"})}));case F:return e.map((function(e){return e.id===t.payload.id&&"secondary"===e.variant?Object(D.a)(Object(D.a)({},e),{},{variant:"outline-info"}):e.id===t.payload.id&&"outline-info"===e.variant?Object(D.a)(Object(D.a)({},e),{},{variant:"secondary"}):e.id===t.payload.id?Object(D.a)(Object(D.a)({},e),{},{active:!e.active}):e}));case I:return e.map((function(e){return console.log(t.payload.time),e.id<=t.payload.time?Object(D.a)(Object(D.a)({},e),{},{disabled:!0}):e}));default:return e}},U=function(e){var t=e.bookings,a=e.timeSelected,n=e.maintenance,s=e.day,r=Object(c.useReducer)(G,function(){var e=[];return M.forEach((function(t,a){e.push({id:t,disabled:"false",variant:"outline-primary",active:"false"})})),e}()),i=Object(l.a)(r,2),o=i[0],u=i[1],b=Object(c.useRef)(new Date);return Object(c.useEffect)((function(){}),[]),Object(c.useEffect)((function(){var e=t.map((function(e){return e.booking_date.substring(11,13)}));return u(n?{type:z,payload:{id:e}}:{type:L,payload:{id:e}}),Object(q.a)(s,b.current)&&u({type:I,payload:{time:Object(E.a)(b.current,1).getHours()}}),function(){}}),[t,n,s]),Object(j.jsx)(d.a,{children:Object(j.jsx)(P.a,{type:"radio",name:"hourselect",vertical:!0,children:n?o.map((function(e){return Object(j.jsx)(B.a,{id:"btn-".concat(e.id),disabled:e.disabled,variant:e.variant,active:e.active,onChange:function(){u({type:F,payload:{id:e.id}}),a(e.id)},size:"lg",children:"".concat(e.id,":00")},e.id)})):o.map((function(e){return Object(j.jsx)(B.a,{id:"btn-".concat(e.id),disabled:e.disabled,variant:e.variant,active:e.active,onChange:function(){u({type:A,payload:{id:e.id}}),a(e.id)},size:"lg",children:"".concat(e.id,":00")},e.id)}))})})},H=function(e){var t=e.userid,a=e.roomid,n=Object(c.useState)(Object(O.a)(Object(x.a)(new Date),2)),s=Object(l.a)(n,2),r=s[0],i=s[1],o=Object(c.useState)([]),u=Object(l.a)(o,2),b=u[0],k=u[1],N=Object(c.useState)(null),D=Object(l.a)(N,2),P=D[0],B=D[1],q=Object(c.useState)(0),E=Object(l.a)(q,2),M=E[0],A=E[1],F=Object(c.useState)(!1),L=Object(l.a)(F,2),z=L[0],I=L[1],G=Object(c.useState)({}),H=Object(l.a)(G,2),V=H[0],W=H[1],Y=Object(c.useRef)(Object(x.a)(new Date)),K=Object(c.useRef)(Object(p.a)(Object(x.a)(new Date),7)),$=Object(c.useRef)(),Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.disabled||i(Object(O.a)(e,2))},Z=Object(c.useCallback)(function(){var e=Object(h.a)(m.a.mark((function e(t){var c,n,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("/book",{params:{type:"general",begin:t.toDateString(),end:Object(p.a)(t,1).toDateString(),roomid:a}});case 3:return c=e.sent,e.next=6,c.data;case 6:n=e.sent,s=n.filter((function(e){return Object(g.a)(e.booking_date).getUTCHours()>=8&&Object(g.a)(e.booking_date).getUTCHours()<=19&&12!==Object(g.a)(e.booking_date).getUTCHours()})),console.log(t),console.log(t.getDate()),k(s),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),alert(e.t0.message),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),[a]);Object(c.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("/rooms/".concat(a));case 3:return t=e.sent,e.next=6,t.data;case 6:c=e.sent,A(c.price),$.current=c.name,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[a]),Object(c.useEffect)((function(){Z(r),B(null)}),[r,Z]);var J=Object(c.useCallback)(Object(h.a)(m.a.mark((function e(){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("/book",{booking_date:P,user_id:t,room_id:a,price_at_booking:M});case 3:c=e.sent,console.log(c),Z(r),W(c.data),I(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),W(e.t0.data),I(!0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),[r,Z,M,a,P,t]),X=function(){return I(!1)},ee=Object(c.useCallback)((function(){B(null),Z(r)}),[r,Z]);return Object(j.jsxs)(d.a,{children:[Object(j.jsxs)(S.a,{children:[Object(j.jsxs)(_.a,{children:[Object(j.jsx)(S.a,{children:Object(v.a)(Object(y.a)(K.current),Y.current)<0?Object(j.jsx)(w.a,{canChangeMonth:!1,selectedDays:r,onDayClick:Q,disabledDays:{before:Y.current,after:K.current}}):Object(j.jsx)(w.a,{selectedDays:r,onDayClick:Q,disabledDays:{before:Y.current,after:K.current},fromMonth:Y.current,toMonth:K.current,fixedWeeks:!0})}),Object(j.jsxs)(S.a,{className:"justify-content-md-center",children:[Object(j.jsxs)("span",{children:["Selected Day: ",r.toDateString()]}),Object(j.jsx)("br",{}),Object(j.jsxs)("span",{children:["Price: $",M]}),Object(j.jsx)("br",{})]}),Object(j.jsxs)(S.a,{className:"justify-content-md-center",children:[Object(j.jsx)("p",{className:"font-weight-bold",children:"Selected: "}),Object(j.jsx)("br",{}),Object(j.jsx)("p",{className:"font-weight-bold ",children:P?P.toDateString():null}),Object(j.jsx)("p",{className:"font-weight-bold ",children:P?"at ".concat(P.getUTCHours(),":00"):null})]})]}),Object(j.jsxs)(_.a,{className:"mt-4 justify-content-md-center",children:[Object(j.jsx)(S.a,{className:"mb-4",children:Object(j.jsx)("span",{className:"font-weight-bold",children:"Choose available timeslot below"})}),Object(j.jsx)(S.a,{children:Object(j.jsx)(U,{bookings:b,timeSelected:function(e){var t=Object(O.a)(r,e),a=Object(f.a)(t,r.getTimezoneOffset());B(a),console.log(b)},maintenance:!1,day:r})})]})]}),P?Object(j.jsxs)(S.a,{className:"mt-4",children:[Object(j.jsx)(_.a,{className:"d-grid gap-2",children:Object(j.jsx)(T.a,{variant:"primary",size:"lg",onClick:J,children:"Confirm"})}),Object(j.jsx)(_.a,{className:"d-grid gap-2",children:Object(j.jsx)(T.a,{variant:"secondary",size:"lg",onClick:ee,children:"Cancel"})})]}):Object(j.jsxs)(S.a,{className:"mt-4",children:[Object(j.jsx)(_.a,{className:"d-grid gap-2",children:Object(j.jsx)(T.a,{variant:"primary",size:"lg",disabled:!0,children:"Confirm"})}),Object(j.jsx)(_.a,{className:"d-grid gap-2",children:Object(j.jsx)(T.a,{variant:"secondary",size:"lg",disabled:!0,children:"Cancel"})})]}),Object(j.jsxs)(R.a,{show:z,onHide:X,backdrop:"static",children:[Object(j.jsxs)(R.a.Header,{children:[Object(j.jsx)("strong",{children:V.title}),Object(j.jsx)("br",{})]}),Object(j.jsx)(R.a.Body,{children:void 0===V?Object(j.jsx)("p",{children:"`Application Error, please contact admin. Error: server response undefined`"}):V.error?Object(j.jsxs)("div",{children:[Object(j.jsxs)("strong",{children:[V.message,", please inform the administrator."]}),Object(j.jsx)("div",{className:"p-3 mb-2 bg-danger text-white",children:"Booking Error"})]}):Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{children:[$.current," was successfully reserved at ",V.message]}),Object(j.jsx)("div",{className:"p-3 mb-2 bg-success text-white",children:"Booking ok"})]})}),Object(j.jsx)(R.a.Footer,{children:Object(j.jsx)(T.a,{variant:"primary",onClick:X,children:"Dismiss"})})]})]})},V=a(329),W=a(630),Y=a(631),K=a(645),$=(a(361),function(e){var t=Object(c.useState)(!0),a=Object(l.a)(t,2),n=a[0],s=a[1],r=e.closeModalMessage,i=e.user;return Object(j.jsxs)(R.a,{className:"modal-message",onHide:function(){s(!1),r()},show:n,backdrop:"static",keyboard:!1,centered:!0,children:[Object(j.jsx)(R.a.Header,{closeButton:!0}),Object(j.jsxs)(R.a.Body,{children:["User ".concat(i.user.first_name," ").concat(i.user.last_name," access was changed to:"),Object(j.jsx)("p",{children:"".concat(i.active?"AUTHORIZED":"NON-AUTHORIZED",".")})]})]})}),Q=a(5),Z=a(628),J=["values","whenClicked","customColumn"],X=function(e){var t=e.values,a=e.whenClicked,c=e.customColumn,n=Object(Q.a)(e,J);return Object(j.jsxs)(Z.a,{bordered:!0,responsive:!0,hover:!0,size:"sm",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),n.headers.map((function(e,t){return Object(j.jsx)("th",{children:e},t)}))]})}),Object(j.jsx)("tbody",{children:t.map((function(e,t){return Object(j.jsxs)("tr",{style:{cursor:"pointer"},children:[Object(j.jsx)("td",{onClick:function(){return a(e)},children:t+1}),n.columns.map((function(t,n){switch(t){case"fullname":return Object(j.jsx)("td",{onClick:function(){return a(e)},children:"".concat(e.first_name," ").concat(e.last_name)},n);case"activeAuthorize":var s=c.find((function(e){return"activeAuthorize"===e.colDesc})).customColumnComp;return Object(j.jsx)("td",{children:s(e)},n);default:return Object(j.jsx)("td",{onClick:function(){return a(e)},children:e[t]},n)}}))]},t)}))})]})},ee=(a(362),a(629)),te=(a(363),function(e){return Object(j.jsx)(R.a,{className:"data-loading-modal",show:!0,backdrop:"static",keyboard:!1,centered:!0,children:Object(j.jsxs)(R.a.Body,{children:[Object(j.jsx)("p",{children:e.message}),Object(j.jsx)(ee.a,{animation:"border",className:"data-loading-spinner"})]})})}),ae=function(e,t){return function(a){var n=Object(c.useState)(!1),s=Object(l.a)(n,2),r=s[0],i=s[1],o=Object(c.useState)(),d=Object(l.a)(o,2),u=d[0],b=d[1];return Object(j.jsxs)(j.Fragment,{children:[r&&Object(j.jsx)(te,{message:u||t}),Object(j.jsx)(e,Object(D.a)(Object(D.a)({},a),{},{setLoadingSpinner:function(e,t){i(e),t&&b(t)}}))]})}},ce=function(e){return function(t){var a=Object(c.useState)(!1),n=Object(l.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)(),d=Object(l.a)(i,2),u=d[0],b=d[1],m=Object(c.useState)(),h=Object(l.a)(m,2),O=h[0],x=h[1],p=Object(c.useState)(),f=Object(l.a)(p,2),g=f[0],v=f[1],y=Object(c.useState)(),k=Object(l.a)(y,2),w=k[0],N=k[1],C=Object(o.f)(),S=function(){if(s)return Object(j.jsxs)(R.a,{size:"lg",show:s,fullscreen:"lg-down",backdrop:"static",keyboard:!1,centered:!0,children:[Object(j.jsx)(R.a.Header,{children:Object(j.jsx)(R.a.Title,{className:"text-secondary",children:u})}),Object(j.jsx)(R.a.Body,{children:O}),Object(j.jsx)(R.a.Footer,{className:"justify-content-center",children:Object(j.jsx)(T.a,{variant:"secondary",onClick:function(){w?(g&&C.push(g),w.callBack()):g?C.push(g):r(!1)},children:"Continue"})})]})};return Object(j.jsxs)(j.Fragment,{children:[s&&Object(j.jsx)(S,{}),Object(j.jsx)(e,Object(D.a)(Object(D.a)({},t),{},{setModalMessage:function(e,t,a,c,n){r(e),b(t),x(a),v(c),N(n)}}))]})}},ne=a(10),se=a(27),re=["label","formType","formData"],ie=function(e){var t=e.label,a=e.formType,c=e.formData,n=Object(Q.a)(e,re),s=Object(se.d)(n),r=Object(l.a)(s,2),i=r[0],o=r[1];return Object(j.jsxs)("div",{className:"mb-3",children:[Object(j.jsx)("label",{ref:n.myref,htmlFor:i.name,children:t}),"input"===a?Object(j.jsx)("input",Object(D.a)(Object(D.a)(Object(D.a)({className:"form-control shadow-none ".concat(o.touched&&o.error&&"is-invalid")},i),n),{},{autoComplete:"off"})):Object(j.jsx)("select",Object(D.a)(Object(D.a)(Object(D.a)({className:"form-control shadow-none ".concat(o.touched&&o.error&&"is-invalid")},i),n),{},{autoComplete:"off",children:c.map((function(e,t){return Object(j.jsx)("option",{children:e},t)}))})),Object(j.jsx)(se.a,{component:"div",name:i.name,className:"error small text-danger "})]})},oe=(a(467),ae(ce((function(e){var t=ne.c().shape({email:ne.e().email("Email is invalid").required("Email is required"),password:ne.e().min(8,"Password must be at least 8 charaters").required("Required")}),a=Object(o.f)(),c=e.setLoadingSpinner,n=e.setModalMessage,s=e.redirectTo,r=function(){var t=Object(h.a)(m.a.mark((function t(r,i){var o,l,d,j,u,b,h;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=i.setFieldError,c(!0,"Logging in..."),t.prev=2,t.next=5,C.a.post("/authentication/login",r);case 5:(l=t.sent).data=Object(D.a)(Object(D.a)({},l.data),{},{display:!1}),d=l.data,j=d.success,u=d.message,b=d.type,h=d.active,c(!1),!h&&j?n(!0,"User is not Activated","Your application is currently under review by our team. This process may take up to 48 hours to be concluded. Please, try again later.","/",{callBack:function(){return e.handlemodal()}}):j?(e.handlemodal(),console.log("CHECK"),console.log(s),a.push({pathname:s,state:Object(D.a)(Object(D.a)({},l.data),{},{display:!0})}),a.go("/dashboard")):"form"===b?(o("password",u),o("email"," ")):n(!0,"Something went wrong","Could not log in at this time. Please try again in a few minutes.","/",{callBack:function(){return e.handlemodal()}}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),c(!1),n(!0,"Something went wrong","Could not log in at this time. Please try again in a few minutes.","/pricing",{callBack:function(){return e.handlemodal()}});case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e,a){return t.apply(this,arguments)}}();return Object(j.jsx)(se.c,{initialValues:{email:"",password:""},validationSchema:t,onSubmit:r,children:function(e){return Object(j.jsx)("div",{className:"login-container",children:Object(j.jsxs)(se.b,{children:[Object(j.jsx)(ie,{formType:"input",label:"Email",name:"email",type:"email",placeholder:"example@email.com"}),Object(j.jsx)(ie,{formType:"input",label:"Password",name:"password",type:"password"}),Object(j.jsx)("div",{className:"login-forgotPassword",children:Object(j.jsx)("a",{href:"/redefine",children:"Forgot password?"})}),Object(j.jsx)("button",{className:"login-form-btn btn btn-block btn-outline-primary mt-3 mb-3",type:"submit",children:"Continue"}),Object(j.jsx)("hr",{}),Object(j.jsx)("div",{className:"login-form-footer",children:Object(j.jsxs)("p",{className:"text-right",children:["Don't have an account?"," ",Object(j.jsx)("span",{className:"login-form-signup-link",children:Object(j.jsx)("a",{href:"/signup",children:"Sign up"})})]})})]})})}})})))),le=function(e){return Object(j.jsxs)(R.a,{size:"sm",show:e.showmodal,fullscreen:"sm-down",className:"text-left text-secondary",onHide:e.handlemodal,centered:!0,children:[Object(j.jsx)(R.a.Header,{closeButton:!0,children:Object(j.jsx)(R.a.Title,{children:"Login"})}),Object(j.jsx)(R.a.Body,{children:Object(j.jsx)(oe,{showmodal:e.showmodal,handlemodal:e.handlemodal,handleAuthState:e.handleAuthState,redirectTo:e.redirectTo})})]})},de=function(e){var t=Object(c.useState)(),a=Object(l.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(),i=Object(l.a)(r,2),u=i[0],b=i[1],m=Object(o.f)(),h=m.location.state,O=Object(c.useState)(!1),x=Object(l.a)(O,2),p=x[0],f=x[1],g=Object(c.useCallback)((function(){e?"404"===e.type?(b("404 - Page not found"),s("We're sorry, we couldn't find the page you requested.")):"401"===e.type?(console.log("401"),f(!0),b("401 - Not Authorized"),s("You don't have authorization to access this resource. Please, log in into your account.")):"403"===e.type&&(b("403 - Forbidden"),s("You don't have permissions to access this resource.")):h?"404"===h.type?(b("404 - Page not found"),s("We're sorry, we couldn't find the page you requested.")):"401"===h.type?(b("401 - Not Authorized"),s("You don't have authorization to access this resource. Please, log in into your account.")):"403"===h.type&&(b("403 - Forbidden"),s("You don't have permissions to access this resource.")):(b("404 - Page not found"),s("We're sorry, we couldn't find the page you requested."))}),[h,e]);return Object(c.useEffect)((function(){g()}),[g]),Object(c.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(j.jsxs)(d.a,{className:"m-4",children:[Object(j.jsx)("h2",{children:u}),Object(j.jsx)("p",{children:n}),Object(j.jsx)(le,{showmodal:p,handlemodal:function(){f(!p)},redirectTo:m.location.pathname})]})},je=ae(ce((function(e){Object(c.useEffect)((function(){window.scrollTo(0,0)}),[]);var t=e.setLoadingSpinner,a=e.setModalMessage,n=Object(c.useRef)(!1),s=Object(c.useState)(),r=Object(l.a)(s,2),i=r[0],u=r[1],b=Object(c.useState)(),O=Object(l.a)(b,2),x=O[0],p=O[1],f=Object(c.useState)(!1),g=Object(l.a)(f,2),v=g[0],y=g[1],k=Object(c.useCallback)(function(){var e=Object(h.a)(m.a.mark((function e(c){var n,s,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.prev=1,e.next=4,C.a.get("/users");case 4:n=e.sent,s=n.data.sort((function(e,t){return e.first_name.toLowerCase()>t.first_name.toLowerCase()?1:-1})),u("authorized"===c?s.filter((function(e){return!0===e.active})):"pending"===c?s.filter((function(e){return!1===e.active})):s),t(!1),r=s.filter((function(e){return!1===e.active})).length,p(r),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),t(!1),e.t0.response&&403===e.t0.response.status?y(!0):a(!0,"Something went wrong","The list of users couldn't be retrieved because the server is not responding. Please, try again.","/");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),[t,a]);Object(c.useEffect)((function(){n.current||(k(),n.current=!0)}),[k]);var w=Object(c.useState)("all"),N=Object(l.a)(w,2),S=N[0],_=N[1],T=Object(c.useRef)(!1);Object(c.useEffect)((function(){T.current&&(k(S),T.current=!1)}),[k,S]);var R=Object(c.useState)({user:{},active:null,changeFlag:!0}),P=Object(l.a)(R,2),B=P[0],q=P[1],E=Object(c.useState)(!1),M=Object(l.a)(E,2),A=M[0],F=M[1],L=function(e,t){q({user:e,active:t,changeFlag:!1})},z=B.user._id,I=B.active,G=Object(c.useCallback)(Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.patch("http://localhost:8080/users/update_authorize/".concat(z),{active:I});case 2:return F(!0),e.next=5,k(S);case 5:case"end":return e.stop()}}),e)}))),[z,I,S,k]);Object(c.useEffect)((function(){B.changeFlag||(G(),q(Object(D.a)(Object(D.a)({},B),{},{changeFlag:!0})))}),[B,G]);var U=Object(o.f)();return!0===v?Object(j.jsx)(de,{}):Object(j.jsx)(d.a,{children:i?A?Object(j.jsx)($,{user:B,closeModalMessage:function(){F(!1)}}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(Y.a,{className:"users-filter-tab mb-4",activeKey:S,onSelect:function(e){return function(e){_(e),T.current=!0}(e)},children:[Object(j.jsx)(K.a,{eventKey:"all",title:"All users"}),Object(j.jsx)(K.a,{eventKey:"authorized",title:"Authorized"}),Object(j.jsx)(K.a,{eventKey:"pending",title:x>0?Object(j.jsxs)("span",{children:["Pending",Object(j.jsx)("span",{style:{color:"red",fontSize:"0.80rem",verticalAlign:"super"},children:" (".concat(x,")")})]}):"Pending"})]}),Object(j.jsx)(X,{headers:["Name","CRP Number","Email","Active"],columns:["fullname","crp_no","email","activeAuthorize"],values:i,whenClicked:function(e){var t="/dashboard/user/".concat(e._id);U.push(t)},customColumn:[{colDesc:"activeAuthorize",customColumnComp:function(e){return Object(j.jsx)(V.a,{className:"btn-active-dropdown-container",children:Object(j.jsxs)(W.a,{className:e.active?"btn-active-dropdown-green":"btn-active-dropdown-red",title:Object(j.jsx)("i",{className:"fas fa-circle"}),drop:"end",size:"sm",variant:"secondary",children:[Object(j.jsx)(V.a.Item,{onClick:function(){return L(e,!0)},children:"Authorize"}),Object(j.jsx)(V.a.Item,{onClick:function(){return L(e,!1)},children:"Deny"})]})})}}]})]}):null})})),"Loading authorization list"),ue=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(),r=Object(l.a)(s,2),i=r[0],o=r[1],d=Object(c.useState)(!0),j=Object(l.a)(d,2),u=j[0],b=j[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,C.a.get("/authentication");case 4:if(!1!==(t=e.sent).data.error){e.next=10;break}n(!0),o(t.data.userData),e.next=11;break;case 10:throw new Error;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n(!1);case 16:return e.prev=16,b(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),{isAuth:a,data:i,isLoading:u}},be=a(328),me=(a(470),a(127)),he=a(324),Oe=a(108),xe=a(214),pe=a(325),fe=a(326);var ge=ae((function(e){var t=Object(o.f)(),a=function(){var a=Object(h.a)(m.a.mark((function a(){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.setLoadingSpinner(!0,"Logging out..."),a.prev=1,a.next=4,C.a.get("/authentication/logout");case 4:200===a.sent.status&&(t.push("/"),t.go("/"),console.log("LOGOUT")),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0);case 11:return a.prev=11,e.setLoadingSpinner(!1),a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[1,8,11,14]])})));return function(){return a.apply(this,arguments)}}(),n=Object(c.useState)(!0),s=Object(l.a)(n,2),r=s[0],d=s[1],u=function(){return Object(j.jsxs)("ul",{className:"nav-menu-items",onClick:null,children:[Object(j.jsx)("li",{className:"nav-text",children:Object(j.jsxs)(i.b,{to:"/dashboard",children:[Object(j.jsx)(me.a,{}),Object(j.jsx)("span",{children:"Home"})]})}),Object(j.jsx)("li",{className:"nav-text",onClick:null,children:Object(j.jsxs)(i.b,{to:"/dashboard/user/".concat(e.id),children:[Object(j.jsx)(me.b,{}),Object(j.jsx)("span",{children:"Profile"})]})}),Object(j.jsx)("li",{className:"nav-text",onClick:null,children:Object(j.jsxs)(i.b,{to:"/dashboard/book",children:[Object(j.jsx)(Oe.b,{}),Object(j.jsx)("span",{children:"Bookings"})]})}),Object(j.jsx)("li",{className:"nav-text",onClick:null,children:Object(j.jsxs)(i.b,{to:"/dashboard/bookinglist",children:[Object(j.jsx)(xe.b,{}),Object(j.jsx)("span",{children:"Booking List"})]})}),e.isAdmin&&Object(j.jsx)("li",{className:"nav-text",onClick:null,children:Object(j.jsxs)(i.b,{to:"/dashboard/report",children:[Object(j.jsx)(xe.a,{}),Object(j.jsx)("span",{children:"Reports"})]})}),Object(j.jsx)("li",{className:"nav-text",onClick:null,children:Object(j.jsxs)(i.b,{to:"/dashboard/user/".concat(e.id,"/changePassword"),children:[Object(j.jsx)(he.a,{}),Object(j.jsx)("span",{children:"Security"})]})}),e.isAdmin&&Object(j.jsx)("li",{className:"nav-text",onClick:null,children:Object(j.jsxs)(i.b,{to:"/dashboard/".concat(e.id,"/authorization"),children:[Object(j.jsx)(pe.a,{}),Object(j.jsx)("span",{children:"Authorize"})]})}),Object(j.jsx)("li",{className:"nav-text",children:Object(j.jsxs)(i.b,{to:"#",onClick:a,children:[Object(j.jsx)(fe.a,{}),Object(j.jsx)("span",{children:"Sign Out"})]})})]})};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"dashboard-button-container",children:Object(j.jsxs)(T.a,{variant:"secondary",onClick:function(){d((function(e){return!e})),e.resize(!0)},className:"dashboard-button me-2",children:["Dashboard Menu",Object(j.jsx)(Oe.a,{className:"dashboard-icon"})]})}),Object(j.jsxs)(be.a,{show:r,onHide:function(){d(!1),e.resize(!1)},scroll:!0,backdrop:!1,className:"offcanvas-container",children:[Object(j.jsx)(be.a.Header,{closeButton:!0,children:Object(j.jsx)(be.a.Title,{className:"dashboard-title text-secondary",children:"Dashboard"})}),Object(j.jsxs)(be.a.Body,{children:[Object(j.jsx)("hr",{}),Object(j.jsx)(u,{})]})]})]})})),ve=["Choose...","AC - Acre","AL - Alagoas","AP - Amap\xe1","AM - Amazonas","BA - Bahia","CE - Cear\xe1","DF - Distrito Federal","ES - Esp\xedrito Santo","GO - Go\xedas","MA - Maranh\xe3o","MT - Mato Grosso","MS - Mato Grosso do Sul","MG - Minas Gerais","PA - Par\xe1","PB - Para\xedba","PR - Paran\xe1","PE - Pernambuco","PI - Piau\xed","RJ - Rio de Janeiro","RN - Rio Grande do Norte","RS - Rio Grande do Sul","RO - Rond\xf4nia","RR - Rora\xedma","SC - Santa Catarina","SP - S\xe3o Paulo","SE - Sergipe","TO - Tocantins"],ye=(a(471),function(e){var t=Object(c.useState)(!0),a=Object(l.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(),i=Object(l.a)(r,2),d=i[0],j=i[1],u=Object(c.useState)({status:!1,type:""}),b=Object(l.a)(u,2),O=b[0],x=b[1],p=Object(o.f)();return Object(c.useEffect)((function(){var t=function(){var t=Object(h.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.prev=1,t.next=4,C.a.get("/users/".concat(e));case 4:(a=t.sent).data.error&&x({status:!0,type:a.data.type.toString()}),a.data._id&&j(a.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),x({status:!0,type:t.t0.response.status.toString()});case 12:return t.prev=12,s(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(){return t.apply(this,arguments)}}();t()}),[p,e]),{fetchedUser:d,isLoading:n,error:O}}),ke=ce((function(e){Object(c.useEffect)((function(){window.scrollTo(0,0)}),[]);var t=Object(c.useState)(!1),a=Object(l.a)(t,2),n=a[0],s=a[1],r=ye(e.id),i=r.fetchedUser,d=r.isLoading,u=r.error,b=ne.c().shape({phone:ne.e().min(12,"Phone number is invalid").required("Phone number is required").matches(/^[0-9]{2}-[0-9]{5}-[0-9]{4}$/,"Invalid phone format"),dob:ne.a().required("Required"),city:ne.e().required("Required"),state:ne.e().required("Required"),zip:ne.e().required("Required"),address1:ne.e().required("Required"),address2:ne.e().required("Required")}),O=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=x.current.values.zip).length>=8)try{C.a.get("https://viacep.com.br/ws/".concat(t,"/json/ ")).then((function(e){if(!e.data.erro){var t=ve.find((function(t){return t.substring(0,2).search(e.data.uf)>=0}));x.current.setFieldValue("city",e.data.localidade),x.current.setFieldValue("state",t),x.current.setFieldValue("address1",e.data.logradouro)}}))}catch(a){console.log(a)}case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=Object(c.useRef)(),p=Object(o.f)(),f=e.setModalMessage,g=function(){var e=Object(h.a)(m.a.mark((function e(t){var a,c,n,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C()({method:"put",url:"/users/edit/".concat(t._id),data:t});case 3:(a=e.sent).data=Object(D.a)(Object(D.a)({},a.data),{},{display:!1}),c=a.data,n=c.success,s=c.redirectURL,n?f(!0,"Success","User successfully updated."):p.push({pathname:s,state:Object(D.a)(Object(D.a)({},a.data),{},{display:!0})}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),p.push({pathname:"dashboard/user/".concat(t._id),state:{message:"Something went wrong",display:!0}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){return i._id!==e.user._id&&(!e.user.isAdmin||i._id!==e.user._id)};return d?Object(j.jsx)(te,{message:"Loading profile..."}):!0===u.status?Object(j.jsx)(de,{type:u.type}):Object(j.jsxs)("div",{className:"p-3 py-5",children:[Object(j.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[Object(j.jsxs)("h4",{children:[i.first_name," ",i.last_name]}),i.active&&Object(j.jsxs)("div",{children:["Account Status:"," ",Object(j.jsx)("span",{className:"badge badge-pill badge-success ml-2",children:"Active"})]}),!i.active&&Object(j.jsxs)("div",{children:["Account Status:"," ",Object(j.jsx)("span",{className:"badge badge-pill bg-danger ml-2",children:"Inactive"})]})]}),Object(j.jsx)("div",{className:"row mt-2",children:Object(j.jsx)(se.c,{innerRef:x,initialValues:{_id:i._id,crp_no:i.crp_no,phone:i.phone,email:i.email,dob:i.dob,zip:i.zip,city:i.city,state:i.state,address1:i.address1,address2:i.address2,cpf_no:i.cpf_no},validationSchema:b,onSubmit:g,children:function(e){return Object(j.jsx)("div",{className:"signup-container",children:Object(j.jsxs)(se.b,{children:[Object(j.jsx)(ie,{formType:"input",label:"CRP (region/number)",name:"crp_no",type:"text",maxLength:"8",placeholder:"00/00000",disabled:!0}),Object(j.jsx)(ie,{formType:"input",label:"Email",name:"email",type:"email",placeholder:"example@email.com",disabled:!0}),Object(j.jsx)(ie,{formType:"input",label:"Phone",name:"phone",type:"text",maxLength:"13",placeholder:"00-00000-0000",onKeyUp:function(){return function(){var e=x.current.values.phone;2===e.length&&!n||8===e.length&&!n?(x.current.setFieldValue("phone",e+"-"),s(!0)):s(!1)}()},disabled:v()}),Object(j.jsx)(ie,{formType:"input",label:"Date of Birth",name:"dob",type:"date",disabled:v()}),Object(j.jsxs)("div",{className:"form-row",children:[Object(j.jsx)("div",{className:"form-group col-md-3",children:Object(j.jsx)(ie,{formType:"input",label:"Zip",type:"text",maxLength:"8",name:"zip",onKeyUp:function(e){return O()},disabled:v()})}),Object(j.jsx)("div",{className:"form-group col-md-5",children:Object(j.jsx)(ie,{formType:"input",label:"City",type:"text",maxLength:"30",name:"city",disabled:v()})}),Object(j.jsx)("div",{className:"form-group col-md-4",children:Object(j.jsx)(ie,{label:"State",formType:"select",formData:ve,id:"inputState",className:"form-control",name:"state",disabled:v()})})]}),Object(j.jsx)(ie,{formType:"input",label:"Address",name:"address1",type:"text",placeholder:"Main St",disabled:v()}),Object(j.jsx)(ie,{formType:"input",label:"Address 2",name:"address2",type:"text",placeholder:"Number, Apartment, studio, or floor",disabled:v()}),!0===v()?null:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{className:"btn btn-outline-primary mt-3 mr-4 mb-4",type:"submit",children:"Save Changes"}),Object(j.jsx)("button",{className:"btn btn-outline-danger mt-3 ml-3 mb-4",type:"reset",children:"Reset Form"})]})]})})}})})]})})),we=ce((function(e){var t=ye(e.id),a=t.fetchedUser,n=t.isLoading,s=t.error,r=ne.c().shape({password:ne.e().min(8,"Password must be at least 8 charaters").required("Required").matches(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/,"Password must contain at least 8 characters, 1 uppercase, 1 lowercase, and 1 number."),confirmPassword:ne.e().oneOf([ne.d("password"),null],"Password must match").required("You must confirm your password")}),i=Object(c.useRef)(),l=Object(o.f)(),d=e.setModalMessage,u=function(){var e=Object(h.a)(m.a.mark((function e(t,a){var c,n,s,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.resetForm,e.prev=1,e.next=4,C()({method:"put",url:"/authentication/".concat(t._id,"/changePassword"),data:t});case 4:(n=e.sent).data=Object(D.a)(Object(D.a)({},n.data),{},{display:!1}),s=n.data,r=s.success,i=s.redirectURL,r?(d(!0,"Success","User password successfully updated."),c()):l.push({pathname:i,state:Object(D.a)(Object(D.a)({},n.data),{},{display:!0})}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),l.push({pathname:"dashboard/user/".concat(t._id,"/changePassword"),state:{message:"Something went wrong",display:!0}});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}();if(n)return Object(j.jsx)(te,{message:"Loading profile..."});if(!0===s.status)return Object(j.jsx)(de,{type:s.type});return Object(j.jsxs)("div",{className:"p-3 py-5",children:[Object(j.jsx)("div",{className:"d-flex justify-content-between mb-3",children:Object(j.jsxs)("h4",{children:[a.first_name," ",a.last_name]})}),Object(j.jsx)("div",{className:"row mt-2",children:Object(j.jsx)(se.c,{innerRef:i,initialValues:{_id:a._id,password:"",confirmPassword:""},validationSchema:r,onSubmit:u,children:function(t){return Object(j.jsx)("div",{className:"signup-container",children:Object(j.jsxs)(se.b,{children:[Object(j.jsx)(ie,{formType:"input",label:"New Password",name:"password",type:"password"}),Object(j.jsx)(ie,{formType:"input",label:"Confirm Password",name:"confirmPassword",type:"password"}),!0===(a._id!==e.user._id&&(!e.user.isAdmin||a._id!==e.user._id))?null:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{className:"btn btn-outline-primary mt-3 mr-4 mb-4",type:"submit",children:"Save Changes"}),Object(j.jsx)("button",{className:"btn btn-outline-danger mt-3 ml-3 mb-4",type:"reset",children:"Reset Form"})]})]})})}})})]})})),Ne=a(639),Ce=[{time:8,text:"08:00 AM"},{time:9,text:"09:00 AM"},{time:10,text:"10:00 AM"},{time:11,text:"11:00 AM"},{time:13,text:"01:00 PM"},{time:14,text:"02:00 PM"},{time:15,text:"03:00 PM"},{time:16,text:"04:00 PM"},{time:17,text:"05:00 PM"},{time:18,text:"06:00 PM"},{time:19,text:"07:00 PM"}],Se=["values"],_e=function(e){e.values;var t=Object(Q.a)(e,Se),a=ne.c().shape({startDate:ne.a(),endDate:ne.a().min(ne.d("startDate"),"Date must be equal or after start date"),startTime:ne.b(),endTime:ne.b().min(ne.d("startTime"),"End must be equal or after start time")});return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(se.c,{initialValues:{name:"",room:0,startDate:"",endDate:"",sort:"byName",startTime:8,endTime:19},validationSchema:a,onSubmit:function(e){var a=e.name,c=e.room,n=e.startDate,s=e.startTime,r=e.endDate,i=e.endTime,o=e.sort,l="name=".concat(a,"&room=").concat(c,"&startDate=").concat(n,"&startTime=").concat(s,"&endDate=").concat(r,"&endTime=").concat(i,"&sort=").concat(o);t.setQuery(l)},children:function(e){var a=e.values,c=e.handleSubmit,n=e.handleChange,s=e.errors;e.touched,e.isValid;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(Ne.a,{noValidate:!0,onSubmit:c,children:[Object(j.jsxs)(S.a,{className:"mb-3",children:[Object(j.jsxs)(Ne.a.Group,{as:_.a,xs:5,controlId:"queryName",children:[Object(j.jsx)(Ne.a.Label,{children:"Name"}),Object(j.jsx)(Ne.a.Control,{name:"name",value:a.name,type:"text",size:"sm",placeholder:"Filter by name",onChange:n})]}),Object(j.jsxs)(Ne.a.Group,{as:_.a,xs:3,controlId:"queryRoom",children:[Object(j.jsx)(Ne.a.Label,{children:"Room"}),Object(j.jsxs)(Ne.a.Select,{"aria-label":"Room select",size:"sm",name:"room",onChange:n,children:[Object(j.jsx)("option",{value:0,children:"All rooms"}),Object(j.jsx)("option",{value:"616610f8838d67d1fab083e9",children:"Room One"}),Object(j.jsx)("option",{value:"6166134d4eca734cbfd3a412",children:"Room Two"}),Object(j.jsx)("option",{value:"6166136e4eca734cbfd3a415",children:"Room Three"})]})]})]}),Object(j.jsxs)(S.a,{className:"mb-3",children:[Object(j.jsxs)(Ne.a.Group,{as:_.a,xs:4,controlId:"queryStartDate",children:[Object(j.jsx)(Ne.a.Label,{children:"Start date"}),Object(j.jsx)(Ne.a.Control,{name:"startDate",type:"date",size:"sm",value:a.startDate,onChange:n,isInvalid:!!s.startDate}),Object(j.jsx)(Ne.a.Control.Feedback,{type:"invalid",children:s.startDate})]}),Object(j.jsxs)(Ne.a.Group,{as:_.a,xs:4,controlId:"queryStartTime",children:[Object(j.jsx)(Ne.a.Label,{children:"Start time"}),Object(j.jsxs)(Ne.a.Select,{"aria-label":"Start time select",size:"sm",name:"startTime",onChange:n,isInvalid:!!s.startTime,children:[Object(j.jsx)("option",{value:8,children:"Select..."}),Ce.map((function(e,t){return Object(j.jsx)("option",{value:e.time,children:e.text},t)}))]}),Object(j.jsx)(Ne.a.Control.Feedback,{type:"invalid",children:s.startTime})]})]}),Object(j.jsxs)(S.a,{className:"mb-3",children:[Object(j.jsxs)(Ne.a.Group,{as:_.a,xs:4,controlId:"queryEndDate",children:[Object(j.jsx)(Ne.a.Label,{children:"End date"}),Object(j.jsx)(Ne.a.Control,{type:"date",size:"sm",name:"endDate",value:a.endDate,onChange:n,isInvalid:!!s.endDate}),Object(j.jsx)(Ne.a.Control.Feedback,{type:"invalid",children:s.endDate})]}),Object(j.jsxs)(Ne.a.Group,{as:_.a,xs:4,controlId:"queryEndTime",children:[Object(j.jsx)(Ne.a.Label,{children:"End time"}),Object(j.jsxs)(Ne.a.Select,{"aria-label":"End time select",size:"sm",name:"endTime",onChange:n,isInvalid:!!s.endTime,children:[Object(j.jsx)("option",{value:19,children:"Select..."}),Ce.map((function(e,t){return Object(j.jsx)("option",{value:e.time,children:e.text},t)}))]}),Object(j.jsx)(Ne.a.Control.Feedback,{type:"invalid",children:s.endTime})]})]}),Object(j.jsxs)(S.a,{children:[Object(j.jsx)(Ne.a.Label,{children:"Sort by"}),Object(j.jsxs)(Ne.a.Group,{as:_.a,xs:4,controlId:"querySortBy",children:[Object(j.jsx)(Ne.a.Check,{inline:!0,label:"Name",name:"sort",type:"radio",id:"byName",value:"byName",onChange:n,defaultChecked:!0}),Object(j.jsx)(Ne.a.Check,{inline:!0,label:"Date",name:"sort",type:"radio",id:"byDate",value:"byDate",onChange:n})]},"radio")]}),Object(j.jsxs)(S.a,{className:"row",children:[Object(j.jsx)(Ne.a.Group,{as:_.a,xs:2,className:"text-left",children:Object(j.jsx)(T.a,{type:"submit",className:"mt-4 mb-4",variant:"secondary",size:"sm",children:"Get report"})}),Object(j.jsx)(Ne.a.Group,{as:_.a,xs:2,className:"text-left",children:t.children})]})]})})}})})},Te=a(646),Re=["values","whenClicked","customColumn","pagination","paginationQuery"],De=function(e){var t=e.values,a=e.whenClicked,n=e.customColumn,s=e.pagination,r=e.paginationQuery,i=Object(Q.a)(e,Re),o=Object(c.useState)(1),d=Object(l.a)(o,2),u=d[0],b=d[1],m=Object(c.useState)(),h=Object(l.a)(m,2),O=h[0],x=h[1],p=Object(c.useState)(!0),f=Object(l.a)(p,2),g=f[0],v=f[1],y=s.max_rows,k=s.paginationTotal,w=Math.ceil(k/y),N=function(e){parseInt(e.target.id)!==u&&(v(!0),b(parseInt(e.target.id)))},C=function(e){"last"===e&&u<w?(v(!0),b(w)):"first"===e&&u>1&&(v(!0),b(1))},S=function(e){"next"===e&&u<w?(v(!0),b((function(e){return e+1}))):"prev"===e&&u>1&&(v(!0),b((function(e){return e-1})))};Object(c.useEffect)((function(){g&&(r("&startpage=".concat((u-1)*y,"&maxrows=").concat(y)),x(u),v(!1))}),[u,g,r,t,y]);for(var _=[],T=1;T<=w;T++)_.push(Object(j.jsx)(Te.a.Item,{onClick:N,active:T===u,id:T,children:T},T));return Object(j.jsx)(j.Fragment,{children:t.length>0?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(Z.a,{bordered:!0,responsive:!0,hover:!0,size:"sm",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),i.headers.map((function(e,t){return Object(j.jsx)("th",{children:e},t)}))]})}),Object(j.jsx)("tbody",{children:t.map((function(e,t){return Object(j.jsxs)("tr",{style:{cursor:"pointer"},children:[Object(j.jsx)("td",{onClick:function(){return a(e)},children:((O-1)*y+t+1).toString()}),i.columns.map((function(t,c){switch(t){case"fullname":return Object(j.jsx)("td",{onClick:function(){return a(e)},children:"".concat(e.first_name," ").concat(e.last_name)},c);case"activeAuthorize":var s=n.find((function(e){return"activeAuthorize"===e.colDesc})).customColumnComp;return Object(j.jsx)("td",{children:s(e)},c);case"total":case"price":case"price_at_reservation":case"price_at_booking":return Object(j.jsx)("td",{onClick:function(){return a(e)},children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e[t])},c);case"_isCancelled":var r;return r=!1===e[t]?"Active":"Cancelled",Object(j.jsx)("td",{onClick:function(){return a(e)},children:r},c);default:return Object(j.jsx)("td",{onClick:function(){return a(e)},children:e[t]},c)}}))]},t)}))})]}),Object(j.jsx)("div",{children:Object(j.jsxs)(Te.a,{children:[Object(j.jsx)(Te.a.First,{onClick:function(){return C("first")}}),Object(j.jsx)(Te.a.Prev,{onClick:function(){return S("prev")}}),_,Object(j.jsx)(Te.a.Next,{onClick:function(){return S("next")}}),Object(j.jsx)(Te.a.Last,{onClick:function(){return C("last")}})]})})]}):null})},Pe=a(638),Be=a(171),qe=a.n(Be),Ee=["columns","values","name","fileName"],Me=qe.a.ExcelFile,Ae=qe.a.ExcelFile.ExcelSheet,Fe=qe.a.ExcelFile.ExcelColumn;Object.byString=function(e,t){for(var a=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),c=0,n=a.length;c<n;++c){var s=a[c];if(!(s in e))return;e=e[s]}return e};var Le=ce((function(e){var t=e.columns,a=e.values,c=e.name,n=e.fileName;Object(Q.a)(e,Ee);return Object(j.jsx)(Me,{filename:n,element:Object(j.jsx)(T.a,{type:"button",className:"mt-4 mb-4",size:"sm",variant:"secondary",children:"Export to Excel"}),children:a?Object(j.jsxs)(Ae,{data:a,name:c,children:[Object(j.jsx)(Fe,{label:"#",value:function(e){return a.indexOf(e)+1}}),t.map((function(e,t){return Object(j.jsx)(Fe,{label:e.label,value:function(t){switch(e.col){case"fullname":case"user.fullname":return t.user?"".concat(t.user.first_name," ").concat(t.user.last_name):"".concat(t.first_name," ").concat(t.last_name);case"total":case"price":case"price_at_reservation":case"price_at_booking":return parseFloat(Object.byString(t,e.col));case"lastBookingDate":case"booking_date":return"".concat(Object(Pe.a)(new Date(Object.byString(t,e.col)),"dd-LLL-y, iii")," at ").concat(Object(g.a)(Object.byString(t,e.col)).getUTCHours(),":00");case"_isCancelled":return Object.byString(t,e.col)?"Cancelled":"Active";default:return Object.byString(t,e.col)}}},t)}))]}):null})})),ze=ae(ce((function(e){var t=e.setLoadingSpinner,a=e.setModalMessage,n=Object(c.useState)(!1),s=Object(l.a)(n,2),r=s[0],i=s[1];Object(c.useEffect)((function(){window.scrollTo(0,0)}),[]);var o=Object(c.useState)(),u=Object(l.a)(o,2),b=u[0],O=u[1],x=Object(c.useState)(),p=Object(l.a)(x,2),f=p[0],g=p[1],v=Object(c.useState)(),y=Object(l.a)(v,2),k=y[0],w=y[1],N=Object(c.useState)(null),S=Object(l.a)(N,2),_=S[0],R=S[1],D=Object(c.useState)("&startpage=0&maxrows=".concat(20)),P=Object(l.a)(D,2),B=P[0],q=P[1];Object(c.useEffect)((function(){if(f){O([]),t(!0,"Generating report data...");var e=function(){var e=Object(h.a)(m.a.mark((function e(c){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("/reports/users?".concat(c));case 3:(n=e.sent).data.values.forEach((function(e){e.time=new Date(e.bookdate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",timeZone:"UTC"}),e.bookdate=Object(Pe.a)(new Date(e.bookdate),"dd-LLL-y, iii")})),0===n.data.total?R("Query returned no results."):i(!0),O(n.data),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),R("Something went wrong. Please, try again later."),a(!0,"Something went wrong","We couldn't generate the report at this moment. Please, try again later.");case 14:return e.prev=14,t(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,9,14,17]])})));return function(t){return e.apply(this,arguments)}}();e(f),g(null)}}),[f,a,t]);var E=function(){return r?Object(j.jsx)(Le,{columns:[{col:"fullname",label:"User Name"},{col:"email",label:"Email"},{col:"cpf_no",label:"CPF"},{col:"booking_id",label:"Booking Id"},{col:"bookdate",label:"Date"},{col:"time",label:"Time"},{col:"room_name",label:"Room Name"},{col:"price_at_booking",label:"Price at Booking"},{col:"_isCancelled",label:"Booking Status"}],values:b.allData,name:"Booking_General_Report",fileName:"booking_general_report"}):Object(j.jsx)(T.a,{type:"button",className:"mt-4 mb-4",size:"sm",variant:"outline-secondary",disabled:!0,children:"Export to Excel"})};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h3",{className:"text-secondary text-left p-3",children:"Booking report"}),Object(j.jsxs)(d.a,{className:"p-3 text-left",children:[Object(j.jsx)(_e,{setQuery:function(e){g(e+B),w(e)},children:Object(j.jsx)(E,{})}),Object(j.jsx)("hr",{}),b&&0!==b.total?Object(j.jsx)(De,{headers:["Name","Email","CPF","Booking Id","Date","Time slot","Room Name","Price","Booking Status"],columns:["fullname","email","cpf_no","booking_id","bookdate","time","room_name","price_at_booking","_isCancelled"],pagination:{max_rows:20,paginationTotal:b.total},paginationQuery:function(e){q(e),g(k+e)},values:b.values,whenClicked:function(){return null}}):_]})]})}))),Ie=a(641),Ge=a(327),Ue=(a(601),function(e){var t=e.user,a=Object(o.f)();return Object(c.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(j.jsx)(d.a,{className:"w-75 ",children:!0===t.isAdmin?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{className:"text-secondary mb-4",children:"Select a report type"}),Object(j.jsx)("br",{})]}),Object(j.jsxs)(Ie.a,{flush:!0,children:[Object(j.jsxs)(Ie.a.Item,{eventKey:"0",children:[Object(j.jsxs)(Ie.a.Header,{className:"acc-header",children:[Object(j.jsx)(Ge.a,{}),Object(j.jsx)("span",{children:"Monthly Report : Total"})]}),Object(j.jsxs)(Ie.a.Body,{className:"text-left",children:[Object(j.jsx)("span",{className:"mr-4",children:"Generate an overall report with totals for a selected month."}),Object(j.jsx)(T.a,{className:"acc-btn",size:"sm",onClick:function(){return a.push("/dashboard/report/month_total")},children:"Click here"})]}),Object(j.jsx)("br",{})]}),Object(j.jsx)("br",{}),Object(j.jsxs)(Ie.a.Item,{eventKey:"1",children:[Object(j.jsxs)(Ie.a.Header,{className:"acc-header",children:[Object(j.jsx)(me.b,{}),Object(j.jsx)("span",{children:"Monthly Report: by User"})]}),Object(j.jsxs)(Ie.a.Body,{className:"text-left",children:[Object(j.jsx)("span",{className:"mr-4",children:"Generate a detailed report of bookings, by user, for a selected month."}),Object(j.jsx)(T.a,{className:"acc-btn",size:"sm",onClick:function(){return a.push("/dashboard/report/month_user")},children:"Click here"})]}),Object(j.jsx)("br",{})]}),Object(j.jsx)("br",{}),Object(j.jsxs)(Ie.a.Item,{eventKey:"2",children:[Object(j.jsxs)(Ie.a.Header,{className:"acc-header",children:[Object(j.jsx)(Oe.b,{}),Object(j.jsx)("span",{children:"All Bookings"})]}),Object(j.jsxs)(Ie.a.Body,{className:"text-left",children:[Object(j.jsx)("span",{className:"mr-4",children:"Generate detailed booking reports for all users, for a selected time."}),Object(j.jsx)(T.a,{className:"acc-btn",size:"sm",onClick:function(){return a.push("/dashboard/report/booking")},children:"Click here"})]})]})]})]}):Object(j.jsx)(Ie.a,{flush:!0,children:Object(j.jsxs)(Ie.a.Item,{eventKey:"2",children:[Object(j.jsxs)(Ie.a.Header,{className:"acc-header",children:[Object(j.jsx)(Oe.b,{}),Object(j.jsx)("span",{children:"My Bookings"})]}),Object(j.jsxs)(Ie.a.Body,{className:"text-left",children:[Object(j.jsx)("span",{className:"mr-4",children:"Generate detailed booking reports for all users, for a selected time."}),Object(j.jsx)(T.a,{className:"acc-btn",size:"sm",onClick:function(){return a.push("/dashboard/report/booking")},children:"Click here"})]})]})})})}),He=a(643),Ve={roomBeige1:a.p+"static/media/room-beige-1.4485ae58.jpeg",roomBeige2:a.p+"static/media/room-beige-2.47859c75.jpeg",roomBlue1:a.p+"static/media/room-blue-1.5eba9afb.jpeg",roomBlue2:a.p+"static/media/room-blue-2.4787fc28.jpeg",roomBuilding:a.p+"static/media/room-building.97203083.jpeg",roomEntrance1:a.p+"static/media/room-entrance-1.7efc01fe.jpeg",roomEntrance2:a.p+"static/media/room-entrance-2.0a287e99.jpeg",roomGreen1:a.p+"static/media/room-green-1.0359497b.jpeg",roomGreen2:a.p+"static/media/room-green-2.c9eba68e.jpeg",roomView:a.p+"static/media/room-view.63078b77.jpeg",nathalia:a.p+"static/media/nathalia.15eab7ef.jpg",pri:a.p+"static/media/pri.5bc2d2a9.jpg"},We=(a(602),function(e){var t=Object(c.useState)(!0),a=Object(l.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(),i=Object(l.a)(r,2),d=i[0],j=i[1],u=Object(c.useState)({status:!1,type:""}),b=Object(l.a)(u,2),O=b[0],x=b[1],p=Object(o.f)();return Object(c.useEffect)((function(){var t=function(){var t=Object(h.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.prev=1,t.next=4,C.a.get("/rooms/".concat(e));case 4:(a=t.sent).data.error&&x({status:!0,type:a.data.type.toString()}),a.data._id&&j(a.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),x({status:!0,type:t.t0.response.status.toString()});case 12:return t.prev=12,s(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(){return t.apply(this,arguments)}}();t()}),[p,e]),{fetchedRoom:d,isLoading:n,error:O}}),Ye=a(63),Ke=function(e){var t=Object(o.f)(),a=function(a){t.push({pathname:"/dashboard/".concat(e.userid,"/").concat(a,"/book")})},c=function(a){t.push({pathname:"/dashboard/".concat(e.userid,"/").concat(a,"/maintenance")})},s=n.a.useState(!1),r=Object(l.a)(s,2),i=r[0],d=r[1],u=n.a.useState(""),b=Object(l.a)(u,2),m=b[0],h=b[1];function O(e){var t=We(e.id),a=t.fetchedRoom,c=t.isLoading,n=t.error;return c?Object(j.jsx)(te,{message:"Loading room..."}):!0===n.status?Object(j.jsx)(de,{type:n.type}):Object(j.jsxs)(R.a,Object(D.a)(Object(D.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(j.jsx)(R.a.Header,{closeButton:!0,children:Object(j.jsx)(R.a.Title,{id:"contained-modal-title-vcenter",children:a.name})}),Object(j.jsxs)(R.a.Body,{children:[Object(j.jsx)("h4",{children:"Description"}),Object(j.jsx)("p",{children:a.description})]}),Object(j.jsx)(R.a.Footer,{children:Object(j.jsx)(T.a,{onClick:e.onHide,children:"Close"})})]}))}return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{className:"text-secondary",children:"Select one of our available rooms"}),Object(j.jsxs)(S.a,{className:"justify-content-center",children:[Object(j.jsxs)(He.a,{style:{width:"18rem"},className:"m-3",children:[Object(j.jsxs)(Ye.a,{interval:null,children:[Object(j.jsx)(Ye.a.Item,{children:Object(j.jsx)(He.a.Img,{variant:"top",style:{width:"15rem",height:"15rem",padding:"5px 0 0 0"},src:Ve.roomBeige1})}),Object(j.jsx)(Ye.a.Item,{children:Object(j.jsx)(He.a.Img,{variant:"top",style:{width:"15rem",height:"15rem",padding:"5px 0 0 0"},src:Ve.roomBeige2})})]}),Object(j.jsxs)(He.a.Body,{children:[Object(j.jsx)(He.a.Title,{children:"Room 1"}),Object(j.jsxs)(He.a.Text,{children:["Sala espa\xe7osa, com sof\xe1 de 3 lugares e poltrona. Ideal para atendimento individuais, de casais ou de fam\xedlia.",Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]}),Object(j.jsxs)(S.a,{children:[Object(j.jsx)(T.a,{className:"col-md-4 mr-3",variant:"secondary",onClick:function(){h("616610f8838d67d1fab083e9"),d(!0)},children:"Details"}),Object(j.jsx)(T.a,{className:"booking-btn col-md-7",onClick:function(){return a("616610f8838d67d1fab083e9")},children:"Book this room"})]})]}),Object(j.jsx)(He.a.Footer,{children:e.isAdmin&&Object(j.jsx)(T.a,{className:"mr-3",variant:"secondary",onClick:function(){return c("616610f8838d67d1fab083e9")},children:"Book Maintenance"})})]}),Object(j.jsxs)(He.a,{style:{width:"18rem"},className:"m-3",children:[Object(j.jsxs)(Ye.a,{interval:null,children:[Object(j.jsx)(Ye.a.Item,{children:Object(j.jsx)(He.a.Img,{variant:"top",style:{width:"15rem",height:"15rem",padding:"5px 0 0 0"},src:Ve.roomBlue1})}),Object(j.jsx)(Ye.a.Item,{children:Object(j.jsx)(He.a.Img,{variant:"top",style:{width:"15rem",height:"15rem",padding:"5px 0 0 0"},src:Ve.roomBlue2})})]}),Object(j.jsxs)(He.a.Body,{children:[Object(j.jsx)(He.a.Title,{children:"Room 2"}),Object(j.jsx)(He.a.Text,{children:"Sala espa\xe7osa, com janelas amplas e linda vista. Equipada com duas poltronas confort\xe1veis e uma mesa, ideal para aplica\xe7\xe3o de testes e atendimentos online."}),Object(j.jsxs)(S.a,{children:[Object(j.jsx)(T.a,{className:"col-md-4 mr-3",variant:"secondary",onClick:function(){h("6166134d4eca734cbfd3a412"),d(!0)},children:"Details"}),Object(j.jsx)(T.a,{className:"booking-btn col-md-7",onClick:function(){return a("6166134d4eca734cbfd3a412")},children:"Book this room"})]})]}),Object(j.jsx)(He.a.Footer,{children:e.isAdmin&&Object(j.jsx)(T.a,{className:"mr-3",variant:"secondary",onClick:function(){return c("6166134d4eca734cbfd3a412")},children:"Book Maintenance"})})]}),Object(j.jsxs)(He.a,{style:{width:"18rem"},className:"m-3",children:[Object(j.jsxs)(Ye.a,{interval:null,children:[Object(j.jsx)(Ye.a.Item,{children:Object(j.jsx)(He.a.Img,{variant:"top",style:{width:"15rem",height:"15rem",padding:"5px 0 0 0"},src:Ve.roomGreen1})}),Object(j.jsx)(Ye.a.Item,{children:Object(j.jsx)(He.a.Img,{variant:"top",style:{width:"15rem",height:"15rem",padding:"5px 0 0 0"},src:Ve.roomGreen2})})]}),Object(j.jsxs)(He.a.Body,{children:[Object(j.jsx)(He.a.Title,{children:"Room 3"}),Object(j.jsxs)(He.a.Text,{children:["Sala com linda vista, duas poltronas amplas e confort\xe1veis e div\xe3 moderno. ",Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]}),Object(j.jsxs)(S.a,{children:[Object(j.jsx)(T.a,{className:"col-md-4 mr-3",variant:"secondary",onClick:function(){h("6166136e4eca734cbfd3a415"),d(!0)},children:"Details"}),Object(j.jsx)(T.a,{className:"booking-btn col-md-7",onClick:function(){return a("6166136e4eca734cbfd3a415")},children:"Book this room"})]})]}),Object(j.jsx)(He.a.Footer,{children:e.isAdmin&&Object(j.jsx)(T.a,{className:"mr-3",variant:"secondary",onClick:function(){return c("6166136e4eca734cbfd3a415")},children:"Book Maintenance"})})]}),i&&Object(j.jsx)(O,{show:i,id:m,onHide:function(){return d(!1)}})]})]})},$e=(a(603),["values","whenClicked","customColumn"]),Qe=function(e){var t=e.values,a=e.whenClicked,c=e.customColumn,n=Object(Q.a)(e,$e);return Object.byString=function(e,t){for(var a=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),c=0,n=a.length;c<n;++c){var s=a[c];if(!(s in e))return;e=e[s]}return e},Object(j.jsxs)(Z.a,{bordered:!0,responsive:!0,hover:!0,size:"sm",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),n.headers.map((function(e,t){return Object(j.jsx)("th",{children:e},t)}))]})}),Object(j.jsx)("tbody",{children:t.map((function(e,t){return Object(j.jsxs)("tr",{style:{cursor:"pointer"},children:[Object(j.jsx)("td",{onClick:function(){return a(e)},children:t+1}),n.columns.map((function(t,n){switch(t){case"fullname":case"user.fullname":return e.user?Object(j.jsx)("td",{onClick:function(){return a(e)},children:"".concat(e.user.first_name," ").concat(e.user.last_name)},n):Object(j.jsx)("td",{onClick:function(){return a(e)},children:"".concat(e.first_name," ").concat(e.last_name)},n);case"fullname2":return Object(j.jsx)("td",{onClick:function(){return a(e)},children:"".concat(e.user_id.first_name," ").concat(e.user_id.last_name)},n);case"total":case"price":case"price_at_reservation":case"price_at_booking":return Object(j.jsx)("td",{onClick:function(){return a(e)},children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Object.byString(e,t))},n);case"active":var s;return s=Object.byString(e,t)?"Active":"Inactive",Object(j.jsx)("td",{onClick:function(){return a(e)},children:s},n);case"_isCancelled":var r;return r=!1===Object.byString(e,t)?"Active":"Cancelled",Object(j.jsx)("td",{onClick:function(){return a(e)},children:r},n);case"createdAt":case"date":return Object(j.jsx)("td",{onClick:function(){return a(e)},children:Object(Pe.a)(new Date(Object.byString(e,t)),"dd-LLL-y, iii")},n);case"lastBookingDate":case"booking_date":return Object(j.jsx)("td",{onClick:function(){return a(e)},children:"".concat(Object(Pe.a)(new Date(Object.byString(e,t)),"dd-LLL-y, iii")," at ").concat(Object(g.a)(Object.byString(e,t)).getUTCHours(),":00")},n);case"booking_date2":return Object(j.jsx)("td",{onClick:function(){return a(e)},children:"".concat(Object(Pe.a)(Object(g.a)(e.booking_date),"iii '-' do 'of' MMMM', ' yyyy")," \n                            at ").concat(Object(g.a)(e.booking_date).getUTCHours(),":00")},n);case"room_id":return Object(j.jsx)("td",{onClick:function(){return a(e)},children:e.room_id.name},n);case"activeAuthorize":var i=c.find((function(e){return"activeAuthorize"===e.colDesc})).customColumnComp;return Object(j.jsx)("td",{children:i(e)},n);case"cancelStatus":var o=c.find((function(e){return"cancelStatus"===e.colDesc})).customColumnComp2;return Object(j.jsx)("td",{children:o(e)},n);default:return Object(j.jsx)("td",{onClick:function(){return a(e)},children:Object.byString(e,t)},n)}}))]},t)}))})]})},Ze=a(313),Je=(a(604),[{name:"past bookings",value:"2"},{name:"upcoming bookings",value:"1"}]),Xe=function(e){var t=e.user,a=Object(c.useState)([]),n=Object(l.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)("1"),o=Object(l.a)(i,2),u=o[0],b=o[1],O=Object(c.useState)(!1),x=Object(l.a)(O,2),p=x[0],v=x[1],y=Object(c.useState)("mine"),k=Object(l.a)(y,2),w=k[0],N=k[1],_=Object(c.useRef)(!1),D=Object(c.useRef)(null),P=Object(c.useRef)(Object(f.a)(new Date,(new Date).getTimezoneOffset())),q=Object(c.useCallback)(function(){var e=Object(h.a)(m.a.mark((function e(a){var c,n,s,i,o,l,d,j;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log(a),"mine"!==a){e.next=24;break}if("1"!==u){e.next=14;break}return e.next=6,C.a.get("/book",{params:{type:"aftbkns",date:P.current,userid:t._id}});case 6:return c=e.sent,e.next=9,c.data;case 9:n=e.sent,console.log(n),r(n),e.next=22;break;case 14:return e.next=16,C.a.get("/book",{params:{type:"bfrbkns",date:P.current,userid:t._id}});case 16:return s=e.sent,e.next=19,s.data;case 19:i=e.sent,console.log(i),r(i);case 22:e.next=44;break;case 24:if("general"!==a){e.next=44;break}if("1"!==u){e.next=36;break}return e.next=28,C.a.get("/book",{params:{type:"aftrequest",date:P.current,userid:t._id}});case 28:return o=e.sent,e.next=31,o.data;case 31:l=e.sent,console.log(l),r(l),e.next=44;break;case 36:return e.next=38,C.a.get("/book",{params:{type:"bfrequest",date:P.current,userid:t._id}});case 38:return d=e.sent,e.next=41,d.data;case 41:j=e.sent,console.log(j),r(j);case 44:e.next=50;break;case 46:e.prev=46,e.t0=e.catch(0),console.log(e.t0),alert(e.t0);case 50:case"end":return e.stop()}}),e,null,[[0,46]])})));return function(t){return e.apply(this,arguments)}}(),[u,t._id]),E=Object(c.useCallback)(function(){var e=Object(h.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a._isCancelled||!t.isAdmin){e.next=6;break}return e.next=3,C.a.patch("http://localhost:8080/book/cancel_approve/".concat(a._id),{_isCancelled:!0});case 3:e.sent,e.next=10;break;case 6:if(a.cancel_request){e.next=10;break}return e.next=9,C.a.patch("http://localhost:8080/book/cancel_request/".concat(a._id),{cancel_request:!0});case 9:e.sent;case 10:q(w);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t.isAdmin,q,w]),M=function(e){var a={variant:"secondary",text:"Request Cancel",disabled:!1};return e._isCancelled?(a.variant="danger",a.text="Booking cancelled",a.disabled=!0):e.cancel_request&&!t.isAdmin?(a.variant="warning",a.text="Cancel request sent",a.disabled=!0):e.cancel_request&&t.isAdmin&&(a.variant="info",a.text="Cancel request received",a.disabled=!1),Object(j.jsx)(T.a,{variant:a.variant,disabled:a.disabled,size:"sm",onClick:function(){return E(e)},children:a.text})};Object(c.useEffect)((function(){q(w)}),[u,q,w]);var A=function(e){D.current=e,v(!0)};return Object(c.useEffect)((function(){_.current&&(q(w),_.current=!1)}),[w,q]),Object(j.jsxs)(d.a,{children:[Object(j.jsxs)(Y.a,{className:"bookings-filter-tab mb-4",color:"#d66f3f",activeKey:w,onSelect:function(e){return function(e){N(e),_.current=!0}(e)},children:[Object(j.jsx)(K.a,{eventKey:"mine",title:"My Bookings"}),t.isAdmin?Object(j.jsx)(K.a,{eventKey:"general",title:"All requests"}):null]}),Object(j.jsx)(S.a,{children:Object(j.jsx)(Ze.a,{children:Je.map((function(e,t){return Object(j.jsx)(B.a,{id:"radio-".concat(t),type:"checkbox",variant:"outline-success",name:"radio",value:e.value,checked:u===e.value,onChange:function(e){return b(e.currentTarget.value)},children:e.name},t)}))})}),Object(j.jsx)(S.a,{children:s?"mine"===w?Object(j.jsx)(Qe,{headers:["Booking date","Room","Price","Type","Cancellation Request"],columns:["booking_date2","room_id","price_at_booking","booking_type","cancelStatus"],values:s,whenClicked:A,customColumn:[{colDesc:"cancelStatus",customColumnComp2:M}]}):Object(j.jsx)(Qe,{headers:["User","Booking date","Room","Price","Type","Cancellation Request"],columns:["fullname2","booking_date2","room_id","price_at_booking","booking_type","cancelStatus"],values:s,whenClicked:A,customColumn:[{colDesc:"cancelStatus",customColumnComp2:M}]}):Object(j.jsx)(He.a,{className:"text-center",children:Object(j.jsx)(He.a.Title,{children:"No Bookings found Yet!"})})}),p&&Object(j.jsxs)(R.a,{show:p,onHide:function(){D.current=null,v(!1)},centered:!0,children:[Object(j.jsx)(R.a.Title,{children:"Booking data"}),Object(j.jsxs)(R.a.Body,{children:["".concat(Object(Pe.a)(Object(g.a)(D.current.booking_date),"iiii '-' do 'of' MMMM', ' yyyy")," \n                    at ").concat(Object(g.a)(D.current.booking_date).getUTCHours(),":00"),Object(j.jsx)("br",{}),"Booking status:",Object(j.jsx)("br",{}),D.current._isCancelled?Object(j.jsx)("div",{class:"p-3 mb-2 bg-danger text-white",children:"Cancelled"}):null,!D.current._isCancelled&&D.current.cancel_request?Object(j.jsx)("div",{class:"p-3 mb-2 bg-warning text-white",children:"Request pending approval"}):null,D.current._isCancelled||D.current.cancel_request?null:Object(j.jsx)("div",{class:"p-3 mb-2 bg-success text-white",children:"Booking ok"})]})]})]})},et=a(30),tt=function(e){var t=e.userid,a=e.roomid,n=Object(c.useState)(Object(O.a)(Object(x.a)(new Date),2)),s=Object(l.a)(n,2),r=s[0],i=s[1],o=Object(c.useState)([]),u=Object(l.a)(o,2),b=u[0],k=u[1],N=Object(c.useState)([]),D=Object(l.a)(N,2),P=D[0],B=D[1],q=Object(c.useState)(0),E=Object(l.a)(q,2),M=E[0],A=E[1],F=Object(c.useState)(!1),L=Object(l.a)(F,2),z=L[0],I=L[1],G=Object(c.useState)({}),H=Object(l.a)(G,2),V=H[0],W=H[1],Y=Object(c.useRef)(Object(x.a)(new Date)),K=Object(c.useRef)(Object(p.a)(Object(x.a)(new Date),7)),$=Object(c.useRef)(),Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.disabled||i(Object(O.a)(e,2))},Z=Object(c.useCallback)(function(){var e=Object(h.a)(m.a.mark((function e(t){var c,n,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("/book",{params:{type:"general",begin:t.toDateString(),end:Object(p.a)(t,1).toDateString(),roomid:a}});case 3:return c=e.sent,e.next=6,c.data;case 6:n=e.sent,s=n.filter((function(e){return Object(g.a)(e.booking_date).getUTCHours()>=8&&Object(g.a)(e.booking_date).getUTCHours()<=19&&12!==Object(g.a)(e.booking_date).getUTCHours()})),k(s),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),alert(e.t0.message),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),[a]);Object(c.useEffect)((function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("/rooms/".concat(a));case 3:return t=e.sent,e.next=6,t.data;case 6:c=e.sent,A(c.price),$.current=c.name,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[a]),Object(c.useEffect)((function(){Z(r),B([])}),[r,Z]);var J=Object(c.useCallback)(Object(h.a)(m.a.mark((function e(){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("/book/maintenance",{booking_dates:P,user_id:t,room_id:a,price_at_booking:M,booking_type:"maintenance"});case 3:c=e.sent,Z(r),B([]),W(c.data),I(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),W(e.t0.data),I(!0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),[r,Z,M,a,P,t]),X=function(){return I(!1)},ee=Object(c.useCallback)((function(){B([]),Z(r)}),[r,Z]);return Object(j.jsxs)(d.a,{children:[Object(j.jsxs)(S.a,{children:[Object(j.jsxs)(_.a,{children:[Object(j.jsx)(S.a,{children:Object(v.a)(Object(y.a)(K.current),Y.current)<0?Object(j.jsx)(w.a,{canChangeMonth:!1,selectedDays:r,onDayClick:Q,disabledDays:{before:Y.current,after:K.current}}):Object(j.jsx)(w.a,{selectedDays:r,onDayClick:Q,disabledDays:{before:Y.current,after:K.current},fromMonth:Y.current,toMonth:K.current,fixedWeeks:!0})}),Object(j.jsxs)(S.a,{className:"justify-content-md-center",children:[Object(j.jsxs)("span",{children:["Room Price: $",M]}),Object(j.jsx)("br",{})]}),Object(j.jsx)(S.a,{className:"justify-content-md-center",children:P.length}),P.length>0?P.map((function(e,t){return Object(j.jsxs)(S.a,{className:"justify-content-md-center",children:[Object(j.jsx)("p",{className:"font-weight-bold ",children:0!==t?null:e.toDateString()}),Object(j.jsx)("p",{className:"font-weight-bold ",children:P?"at ".concat(e.getUTCHours(),":00"):null})]},t)})):Object(j.jsx)(S.a,{className:"justify-content-md-center",children:"No booking selected"})]}),Object(j.jsxs)(_.a,{className:"mt-4 justify-content-md-center",children:[Object(j.jsx)(S.a,{className:"mb-4",children:Object(j.jsx)("span",{className:"font-weight-bold",children:"Choose available timeslot below"})}),Object(j.jsx)(S.a,{children:Object(j.jsx)(U,{bookings:b,timeSelected:function(e){var t=Object(O.a)(r,e),a=Object(f.a)(t,r.getTimezoneOffset());B((function(e){var t=e.filter((function(e){return e.getUTCHours()!==a.getUTCHours()}));return t.length<e.length?t:[].concat(Object(et.a)(e),[a])}))},maintenance:!0,day:r})})]})]}),0===P.length?Object(j.jsxs)(S.a,{className:"mt-4",children:[Object(j.jsx)(_.a,{className:"d-grid gap-2",children:Object(j.jsx)(T.a,{variant:"primary",size:"lg",disabled:!0,children:"Confirm"})}),Object(j.jsx)(_.a,{className:"d-grid gap-2",children:Object(j.jsx)(T.a,{variant:"secondary",size:"lg",disabled:!0,children:"Cancel"})})]}):Object(j.jsxs)(S.a,{className:"mt-4",children:[Object(j.jsx)(_.a,{className:"d-grid gap-2",children:Object(j.jsx)(T.a,{variant:"primary",size:"lg",onClick:J,children:"Confirm"})}),Object(j.jsx)(_.a,{className:"d-grid gap-2",children:Object(j.jsx)(T.a,{variant:"secondary",size:"lg",onClick:ee,children:"Cancel"})})]}),Object(j.jsxs)(R.a,{show:z,onHide:X,backdrop:"static",children:[Object(j.jsxs)(R.a.Header,{children:[Object(j.jsx)("strong",{children:V.title}),Object(j.jsx)("br",{})]}),Object(j.jsx)(R.a.Body,{children:void 0===V?Object(j.jsx)("p",{children:"`Application Error, please contact admin. Error: server response undefined`"}):V.error?Object(j.jsxs)("div",{children:[Object(j.jsxs)("strong",{children:[V.message,", please inform the administrator."]}),Object(j.jsx)("div",{className:"p-3 mb-2 bg-danger text-white",children:"Booking Error"})]}):Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{children:[$.current," was successfully reserved at ",V.message]}),Object(j.jsx)("div",{className:"p-3 mb-2 bg-success text-white",children:"Booking ok"})]})}),Object(j.jsx)(R.a.Footer,{children:Object(j.jsx)(T.a,{variant:"primary",onClick:X,children:"Dismiss"})})]})]})},at=a(632),ct=a(633),nt=a(644),st=a(634),rt=a(635),it=a(636),ot=a(637),lt=(a(605),function(e){var t=Object.assign({},e),a=Object(c.useState)([]),n=Object(l.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)(!1),o=Object(l.a)(i,2),d=o[0],u=o[1],b=function(){var e=[];return Object(ot.a)({start:new Date(2021,1,1),end:new Date}).forEach((function(t){e.push(Object(Pe.a)(t,"y"))})),e.sort((function(e,t){return t-e}))}(),m=Object(c.useRef)();Object(c.useEffect)((function(){d&&(r(function(e){var t,a=[];return"-1"===e||(t=e<Object(at.a)(new Date)?Object(ct.a)(Object(nt.a)(new Date,{year:e})):Object(nt.a)(new Date,{year:e}),Object(st.a)({start:Object(rt.a)(t),end:t}).forEach((function(e){a.push({name:Object(Pe.a)(e,"MMMM"),value:Object(it.a)(e)})}))),a}(m.current.values.year)),u((function(e){return!e})))}),[d]);var h=ne.c().shape({year:ne.b().required("Required").min(0,"Please, select a year"),month:ne.b().required("Required").min(0,"Please, select a month")});return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(se.c,{initialValues:{name:"",room:0,year:-1,month:-1,sort:"byName"},validationSchema:h,onSubmit:function(e){var a=e.name,c=e.year,n=e.month,s=e.sort,r="name=".concat(a,"&year=").concat(c,"&month=").concat(n,"&sort=").concat(s,"&show_cancel=false");t.setQuery(r)},innerRef:m,children:function(e){e.values;var a=e.handleSubmit,c=e.handleChange,n=(e.handleBlur,e.errors),r=e.touched;e.isValid;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(Ne.a,{className:"query-form",onSubmit:a,children:[Object(j.jsxs)(S.a,{className:"row mb-4 text-left",children:[Object(j.jsxs)(Ne.a.Group,{as:_.a,xs:3,controlId:"queryYear",children:[Object(j.jsx)(Ne.a.Label,{children:"Year"}),Object(j.jsxs)(Ne.a.Select,{"aria-label":"Select Year",size:"sm",name:"year",onChange:function(e){c(e),u(!0)},isInvalid:r.year&&!!n.year,children:[Object(j.jsx)("option",{value:-1,children:"Select..."}),b.map((function(e){return Object(j.jsx)("option",{value:e,children:e},e)}))]}),Object(j.jsx)(Ne.a.Control.Feedback,{type:"invalid",children:n.year})]}),Object(j.jsxs)(Ne.a.Group,{as:_.a,xs:3,controlId:"queryMonth",children:[Object(j.jsx)(Ne.a.Label,{children:"Month"}),Object(j.jsxs)(Ne.a.Select,{"aria-label":"Select Month",size:"sm",name:"month",onChange:c,isInvalid:r.month&&!!n.month,children:[Object(j.jsx)("option",{value:-1,children:"Select..."}),s.map((function(e){return Object(j.jsx)("option",{value:e.value,children:e.name},e.value)}))]}),Object(j.jsx)(Ne.a.Control.Feedback,{type:"invalid",children:n.month})]})]}),Object(j.jsxs)(S.a,{className:"row text-left",children:[Object(j.jsx)(Ne.a.Label,{as:_.a,xs:{span:1,offset:3},children:"Sort"}),Object(j.jsxs)(Ne.a.Group,{as:_.a,xs:{span:6,offset:0},controlId:"querySortBy",children:[Object(j.jsx)(Ne.a.Check,{inline:!0,label:"Name",name:"sort",type:"radio",id:"byName",value:"byName",onChange:c,defaultChecked:!0}),Object(j.jsx)(Ne.a.Check,{inline:!0,label:"Total Amount",name:"sort",type:"radio",id:"byAmount",value:"byAmount",onChange:c})]},"radio")]}),Object(j.jsxs)(S.a,{className:"row",children:[Object(j.jsx)(Ne.a.Group,{as:_.a,xs:2,className:"text-left",children:Object(j.jsx)(T.a,{type:"submit",className:"mt-4 mb-4",variant:"secondary",size:"sm",children:"Get report"})}),Object(j.jsx)(Ne.a.Group,{as:_.a,xs:2,className:"text-left",children:t.children})]})]})})}})})}),dt=(a(606),ae(ce((function(e){var t=Object(c.useState)(),a=Object(l.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(),i=Object(l.a)(r,2),d=i[0],u=i[1],b=Object(c.useState)(),O=Object(l.a)(b,2),x=O[0],p=O[1],f=Object(c.useState)(),g=Object(l.a)(f,2),v=g[0],y=g[1],k=Object(c.useState)(),w=Object(l.a)(k,2),N=w[0],D=w[1],P=Object(c.useState)(!1),B=Object(l.a)(P,2),q=B[0],E=B[1],M=e.setLoadingSpinner,A=e.setModalMessage;Object(c.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(c.useEffect)((function(){if(n){M(!0,"Generating report data...");var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("/reports/monthlytotal?".concat(n));case 3:(t=e.sent).data.length>0?(y(t.data),a=0,t.data.forEach((function(e){a+=e.total})),D(a.toFixed(2)),u((Object(Pe.a)(new Date(t.data[0].lastBookingDate),"M")-1).toString()),p(Object(Pe.a)(new Date(t.data[0].lastBookingDate),"y")),E(!0)):A(!0,"Report error","There are no bookings in the selected month."),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),A(!0,"Something went wrong","We couldn't generate the report at this moment. Please, try again later.");case 11:return e.prev=11,M(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,7,11,14]])})));return function(){return e.apply(this,arguments)}}();e(),s(null)}}),[n,A,M]);var F=Object(c.useState)(!1),L=Object(l.a)(F,2),z=L[0],I=L[1],G=Object(c.useState)(),U=Object(l.a)(G,2),H=U[0],V=U[1],W=Object(o.f)(),Y=function(e){return Object(j.jsxs)(R.a,{size:"sm",show:z,fullscreen:"lg-down",backdrop:"static",keyboard:!1,centered:!0,children:[Object(j.jsxs)(R.a.Body,{children:["Do you want to get the"," ",Object(j.jsx)("span",{style:{color:"#f39a71",fontWeight:"bold"},children:"monthly report"})," ","for user"," ",Object(j.jsx)("strong",{children:"".concat(e.data.user.user.first_name," ").concat(e.data.user.user.last_name)}),"?"]}),Object(j.jsxs)(R.a.Footer,{className:"justify-content-center",children:[Object(j.jsx)(T.a,{variant:"secondary",onClick:function(){return I(!1)},children:"Cancel"}),Object(j.jsx)(T.a,{variant:"primary",onClick:function(){return W.push("/dashboard/report/month_user",e.data)},children:"Get report"})]})]})},K=function(){return q?Object(j.jsx)(Le,{columns:[{col:"user.fullname",label:"User Name"},{col:"user.email",label:"Email"},{col:"user.cpf_no",label:"CPF"},{col:"lastBookingDate",label:"Last booking at"},{col:"quantity",label:"Quantity"},{col:"total",label:"Total"}],values:v,name:"Monthly_total_report",fileName:"".concat(Object(Pe.a)(new Date(v[0].lastBookingDate),"MMMM"),"_total_report")}):Object(j.jsx)(T.a,{type:"button",className:"mt-4 mb-4",size:"sm",variant:"outline-secondary",disabled:!0,children:"Export to Excel"})};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"query-container",children:[Object(j.jsx)("h3",{className:"text-secondary mb-4",children:"Monthly Total Report"}),Object(j.jsx)(lt,{setQuery:function(e){s(e)},children:Object(j.jsx)(K,{})})]}),z?Object(j.jsx)(Y,{data:H}):null,v?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Qe,{headers:["User Name","Email","CPF","Last booking at","Quantity","Total"],columns:["user.fullname","user.email","user.cpf_no","lastBookingDate","quantity","total"],values:v,whenClicked:function(e){I(!0);var t="name=".concat(e.user.first_name," ").concat(e.user.last_name,"&year=").concat(x,"&month=").concat(d,"&sort=byName&show_cancel=false&id=").concat(e.user._id);V({user:e,month:d,year:x,query:t})}}),Object(j.jsxs)(S.a,{className:"total",children:[Object(j.jsxs)(_.a,{className:"total-col",xs:{span:3,offset:7},children:["Total for ",Object(Pe.a)(new Date(v[0].lastBookingDate),"MMMM")]}),Object(j.jsxs)(_.a,{className:"total-col result",xs:{span:2},children:["R$ ",N]})]})]}):null]})})))),jt=(a(607),function(e){var t=Object.assign({},e),a=Object(c.useState)([]),n=Object(l.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)(!1),o=Object(l.a)(i,2),d=o[0],u=o[1],b=function(){var e=[];return Object(ot.a)({start:new Date(2021,1,1),end:new Date}).forEach((function(t){e.push(Object(Pe.a)(t,"y"))})),e.sort((function(e,t){return t-e}))}(),O=Object(c.useRef)();Object(c.useEffect)((function(){d&&(r(function(e){var t,a=[];return"-1"===e||(t=e<Object(at.a)(new Date)?Object(ct.a)(Object(nt.a)(new Date,{year:e})):Object(nt.a)(new Date,{year:e}),Object(st.a)({start:Object(rt.a)(t),end:t}).forEach((function(e){a.push({name:Object(Pe.a)(e,"MMMM"),value:Object(it.a)(e)})}))),a}(O.current.values.year)),u((function(e){return!e})))}),[d]);var x=Object(c.useState)([]),p=Object(l.a)(x,2),f=p[0],g=p[1],v=function(){var e=Object(h.a)(m.a.mark((function e(t){var a,c,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.value,!(0===f.length&&a.length>=3)){e.next=14;break}return e.prev=2,e.next=5,C.a.get("/users?name=".concat(a));case 5:(c=e.sent).data&&(n=[],c.data.forEach((function(e){n.push("".concat(e.first_name," ").concat(e.last_name))})),n.length>0&&g(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:e.next=15;break;case 14:f.length>0&&a.length<3&&g([]);case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),y=ne.c().shape({year:ne.b().required("Required").min(0,"Please, select a year"),month:ne.b().required("Required").min(0,"Please, select a month")});return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(se.c,{initialValues:{name:"",room:0,year:-1,month:-1,sort:"asc",show_cancel:!1},validationSchema:y,onSubmit:function(e){var a=e.name,c=e.year,n=e.month,s=e.sort,r=e.show_cancel,i="name=".concat(a,"&year=").concat(c,"&month=").concat(n,"&sort=").concat(s,"&show_cancel=").concat(r,"&id=");t.setQuery(i)},innerRef:O,children:function(e){var a=e.values,c=e.handleSubmit,n=e.handleChange,r=e.errors,i=e.touched;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(Ne.a,{className:"query-form",onSubmit:c,children:[Object(j.jsxs)(S.a,{className:"row mb-4 text-left",children:[Object(j.jsxs)(Ne.a.Group,{as:_.a,xs:4,controlId:"queryName",children:[Object(j.jsx)(Ne.a.Label,{children:"Name"}),Object(j.jsx)(Ne.a.Control,{className:"name-input",name:"name",value:a.name,type:"text",size:"sm",autoComplete:"off",placeholder:"Type user name",onBlur:function(){return setTimeout((function(){return g([])}),500)},onChange:function(e){n(e),v(e)}}),f.length>0?Object(j.jsx)("div",{className:"suggestions",children:f.map((function(e,t){return Object(j.jsx)("li",{className:"suggestions-item",type:"button",onClick:function(){return function(e){O.current.setFieldValue("name",e),g([])}(e)},children:e},t)}))}):null]}),Object(j.jsxs)(Ne.a.Group,{as:_.a,xs:2,controlId:"queryYear",children:[Object(j.jsx)(Ne.a.Label,{children:"Year"}),Object(j.jsxs)(Ne.a.Select,{"aria-label":"Select Year",size:"sm",name:"year",onChange:function(e){n(e),u(!0)},isInvalid:i.year&&!!r.year,children:[Object(j.jsx)("option",{value:-1,children:"Select..."}),b.map((function(e){return Object(j.jsx)("option",{value:e,children:e},e)}))]}),Object(j.jsx)(Ne.a.Control.Feedback,{type:"invalid",children:r.year})]}),Object(j.jsxs)(Ne.a.Group,{as:_.a,xs:2,controlId:"queryMonth",children:[Object(j.jsx)(Ne.a.Label,{children:"Month"}),Object(j.jsxs)(Ne.a.Select,{"aria-label":"Select Month",size:"sm",name:"month",onChange:n,isInvalid:i.month&&!!r.month,children:[Object(j.jsx)("option",{value:-1,children:"Select..."}),s.map((function(e){return Object(j.jsx)("option",{value:e.value,children:e.name},e.value)}))]}),Object(j.jsx)(Ne.a.Control.Feedback,{type:"invalid",children:r.month})]})]}),Object(j.jsxs)(S.a,{className:"row text-left",children:[Object(j.jsx)(Ne.a.Label,{as:_.a,xs:{span:1,offset:2},children:"Sort"}),Object(j.jsxs)(Ne.a.Group,{as:_.a,xs:{span:3,offset:0},controlId:"querySortBy",children:[Object(j.jsx)(Ne.a.Check,{inline:!0,label:"Oldest date",name:"sort",type:"radio",id:"asc",value:"asc",onChange:n,defaultChecked:!0}),Object(j.jsx)(Ne.a.Check,{inline:!0,label:"Newest date",name:"sort",type:"radio",id:"desc",value:"desc",onChange:n})]},"radio"),Object(j.jsx)(Ne.a.Group,{as:_.a,controlId:"queryShowCancel",children:Object(j.jsx)(Ne.a.Check,{inline:!0,label:"Show cancelled bookings",name:"show_cancel",id:"show_cancel",onChange:n})},"checkbox")]}),Object(j.jsxs)(S.a,{className:"row",children:[Object(j.jsx)(Ne.a.Group,{as:_.a,xs:2,className:"text-left",children:Object(j.jsx)(T.a,{type:"submit",className:"mt-4 mb-4",variant:"secondary",size:"sm",children:"Get report"})}),Object(j.jsx)(Ne.a.Group,{as:_.a,xs:2,className:"text-left",children:t.children})]})]})})}})})}),ut=(a(608),ae(ce((function(e){var t=Object(c.useState)(),a=Object(l.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(),i=Object(l.a)(r,2),d=i[0],u=i[1],b=Object(c.useState)(),O=Object(l.a)(b,2),x=O[0],p=O[1],f=Object(c.useState)([]),g=Object(l.a)(f,2),v=g[0],y=g[1],k=Object(c.useState)(!1),w=Object(l.a)(k,2),N=w[0],D=w[1],P=Object(c.useState)(!1),B=Object(l.a)(P,2),q=B[0],E=B[1],M=e.setLoadingSpinner,A=e.setModalMessage,F=function(e){s(e)},L=Object(o.f)();L.location.state&&(M(!1),F(L.location.state.query),L.replace()),Object(c.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(c.useEffect)((function(){if(n){u(n),M(!0,"Generating report data...");var e=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("/reports/monthly_user?".concat(n));case 3:!0===(t=e.sent).data.multiple?(y(t.data.values),D(!0)):t.data[0].bookings.length>0?(p(t.data[0]),E(!0)):A(!0,"Report error","There are no bookings for user ".concat(n.split("&")[0].substr(5).toUpperCase()," in the selected month.")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),A(!0,"Something went wrong","We couldn't generate the report at this moment. Please, try again later.");case 11:return e.prev=11,M(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,7,11,14]])})));return function(){return e.apply(this,arguments)}}();e(),s(null)}}),[n,A,M]);var z=function(e){var t=d.split("=");t[1]="".concat(e.first_name," ").concat(e.last_name,"&year"),t=t.join("="),t+=e._id,s(t),D(!1)},I=function(){return Object(j.jsxs)(R.a,{className:"user-modal",size:"lg",show:N,fullscreen:"lg-down",backdrop:"static",keyboard:!0,centered:!0,onHide:function(){return D(!1)},children:[Object(j.jsx)(R.a.Header,{closeButton:!0,children:Object(j.jsx)("h3",{children:"Select a user from the list"})}),Object(j.jsx)(R.a.Body,{className:"user-modal-body",children:Object(j.jsx)(Qe,{headers:["User Name","Email","CPF","Status"],columns:["fullname","email","cpf_no","active"],values:v,whenClicked:z})})]})},G=function(){return q?Object(j.jsx)(Le,{columns:[{col:"_id",label:"Booking Id"},{col:"booking_date",label:"Booking Date"},{col:"room_id.name",label:"Room Description"},{col:"price_at_booking",label:"Price at Booking (R$)"},{col:"_isCancelled",label:"Booking Status"}],values:x.bookings,name:"Monthly_user_report",fileName:"".concat(Object(Pe.a)(new Date(x.lastBookingDate),"MMMM"),"_").concat(x.user.first_name,"_").concat(x.user.last_name,"_report")}):Object(j.jsx)(T.a,{type:"button",className:"mt-4 mb-4",size:"sm",variant:"outline-secondary",disabled:!0,children:"Export to Excel"})};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"query-container",children:[Object(j.jsx)("h3",{className:"text-secondary mb-4",children:"Monthly Report by User"}),Object(j.jsx)(jt,{setQuery:F,children:Object(j.jsx)(G,{})})]}),v?Object(j.jsx)(I,{}):null,x?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Qe,{className:"new-table-data",headers:["Booking ID","Booking Date","Room Description","Price at booking","Booking status"],columns:["_id","booking_date","room_id.name","price_at_booking","_isCancelled"],values:x.bookings,whenClicked:function(){return null}}),Object(j.jsxs)(S.a,{className:"total",children:[Object(j.jsxs)(_.a,{className:"total-col",xs:{span:3,offset:7},children:["Total for ",Object(Pe.a)(new Date(x.lastBookingDate),"MMMM")]}),Object(j.jsxs)(_.a,{className:"total-col result",xs:{span:2},children:["R$ ",x.total]})]}),Object(j.jsx)("span",{})]}):null]})})))),bt=function(e){var t=e.match,a=ue(),n=a.isAuth,s=a.isLoading,r=a.data,i=Object(c.useState)(!0),d=Object(l.a)(i,2),b=d[0],m=d[1];return s?null:n?n?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"sidebar",children:Object(j.jsx)(ge,{id:r._id,isAdmin:r.isAdmin,resize:function(e){m(e)}})}),Object(j.jsx)("div",{className:b?"content-resize":"content",children:Object(j.jsxs)(o.c,{children:[Object(j.jsx)(o.a,{exact:!0,path:"".concat(t.url),children:Object(j.jsx)(u,{userData:r})}),Object(j.jsx)(o.a,{exact:!0,path:"".concat(t.url,"/user/:id"),render:function(e){return Object(j.jsx)(ke,{id:e.match.params.id,user:r})}}),Object(j.jsx)(o.a,{exact:!0,path:"".concat(t.url,"/user/:id/changePassword"),render:function(e){return Object(j.jsx)(we,{id:e.match.params.id,user:r})}}),Object(j.jsx)(o.a,{exact:!0,path:"".concat(t.url,"/book"),render:function(e){return Object(j.jsx)(Ke,{userid:r._id,isAdmin:r.isAdmin,roomid:e.match.params.roomid})}}),Object(j.jsx)(o.a,{exact:!0,path:"".concat(t.url,"/:userid/:roomid/book"),render:function(e){return Object(j.jsx)(H,{userid:r._id,roomid:e.match.params.roomid})}}),Object(j.jsx)(o.a,{exact:!0,path:"".concat(t.url,"/:userid/:roomid/maintenance"),render:function(e){return Object(j.jsx)(tt,{userid:r._id,roomid:e.match.params.roomid})}}),Object(j.jsx)(o.a,{exact:!0,path:"".concat(t.url,"/:id/authorization"),children:Object(j.jsx)(je,{})}),Object(j.jsx)(o.a,{exact:!0,path:"".concat(t.url,"/report/"),children:Object(j.jsx)(Ue,{user:r})}),Object(j.jsx)(o.a,{exact:!0,path:"".concat(t.url,"/report/booking"),children:Object(j.jsx)(ze,{user:r})}),Object(j.jsx)(o.a,{exact:!0,path:"".concat(t.url,"/report/month_total"),children:Object(j.jsx)(dt,{})}),Object(j.jsx)(o.a,{exact:!0,path:"".concat(t.url,"/report/month_user"),children:Object(j.jsx)(ut,{})}),Object(j.jsx)(o.a,{exact:!0,path:"".concat(t.url,"/bookinglist"),render:function(e){return Object(j.jsx)(Xe,{user:r})}}),Object(j.jsxs)(o.a,{exact:!0,path:"".concat(t.url,"/*"),children:[Object(j.jsx)("div",{children:"PROTECTED ERROR 404"}),Object(j.jsx)(de,{type:"404"})]})]})})]}):void 0:Object(j.jsx)(de,{type:"401"})},mt=a(642),ht=a(330),Ot=(a(609),ae((function(e){var t=Object(c.useState)(!1),a=Object(l.a)(t,2),n=a[0],s=a[1],r=function(){s(!n)},d=Object(o.f)(),u=ue(),b=u.isAuth,O=u.isLoading,x=function(){var t=Object(h.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoadingSpinner(!0,"Logging out..."),t.prev=1,t.next=4,C.a.get("/authentication/logout");case 4:200===t.sent.status&&(d.push("/"),d.go("/"),console.log("LOGOUT")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:return t.prev=11,e.setLoadingSpinner(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(){return t.apply(this,arguments)}}(),p=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(mt.a,{className:"nav-template",variant:"dark",sticky:"top",expand:"lg",children:[Object(j.jsxs)(mt.a.Brand,{className:"logo",as:i.b,to:"/",children:["Psicoworking"," "]}),Object(j.jsx)(mt.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(j.jsx)(mt.a.Collapse,{className:"justify-content-end",children:Object(j.jsxs)(ht.a,{children:[Object(j.jsx)(ht.a.Link,{as:i.c,to:"/dashboard",className:"nav-template-link md-auto customColor",children:O?null:"Dashboard"},"Dashboard"),Object(j.jsx)(ht.a.Link,{as:i.c,to:"/about",className:"nav-template-link md-auto customColor",children:"About us"},"About us"),Object(j.jsx)(ht.a.Link,{className:"nav-template-link pb-0 customColor",onClick:x,children:"Sign Out"},"Logout")]})})]}),Object(j.jsx)(le,{showmodal:n,handlemodal:x,redirectTo:"/dashboard"})]})},f=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(mt.a,{className:"nav-template",variant:"dark",sticky:"top",expand:"lg",children:[Object(j.jsx)(mt.a.Brand,{className:"logo",as:i.b,to:"/",children:"Psicoworking"}),Object(j.jsx)(mt.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(j.jsx)(mt.a.Collapse,{className:"justify-content-end",children:Object(j.jsxs)(ht.a,{children:[Object(j.jsx)(ht.a.Link,{as:i.c,to:"/about",className:"nav-template-link md-auto customColor",children:"About us"},"About us"),Object(j.jsx)(ht.a.Link,{as:i.c,to:"/signup",className:"nav-template-link md-auto customColor",children:"Sign up"},"Sign Up"),Object(j.jsx)(ht.a.Link,{className:"nav-template-link md-auto customColor",onClick:r,children:"Log in"},"Login")]})})]}),Object(j.jsx)(le,{showmodal:n,handlemodal:r,redirectTo:"/dashboard"})]})},g=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(mt.a,{className:"nav-template",variant:"dark",sticky:"top",expand:"lg",children:[Object(j.jsx)(mt.a.Brand,{className:"logo",as:i.b,to:"/",children:"Psicoworking"}),Object(j.jsx)(mt.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(j.jsx)(mt.a.Collapse,{className:"justify-content-end",children:Object(j.jsx)(ht.a,{})})]})})};return O?Object(j.jsx)(g,{}):Object(j.jsx)(j.Fragment,{children:b?Object(j.jsx)(p,{}):Object(j.jsx)(f,{})})})));a(311),a(610);var xt=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("script",{src:"https://code.jquery.com/jquery-3.5.1.slim.min.js",integrity:"sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj",crossorigin:"anonymous"}),Object(j.jsx)("script",{src:"https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js",integrity:"sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN",crossorigin:"anonymous"}),Object(j.jsx)("script",{src:"https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js",integrity:"sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV",crossorigin:"anonymous"}),Object(j.jsx)("footer",{children:Object(j.jsxs)("div",{class:"container",children:[Object(j.jsxs)("div",{class:"row",children:[Object(j.jsx)("div",{class:"col-md-4 footer-column",children:Object(j.jsxs)("ul",{class:"nav flex-column",children:[Object(j.jsx)("li",{class:"nav-item",children:Object(j.jsx)("span",{class:"footer-title",children:"Psicoworking"})}),Object(j.jsx)("li",{class:"nav-item",children:Object(j.jsx)("p",{children:"We have the perfect room for your consultations"})})]})}),Object(j.jsx)("div",{class:"col-md-4 footer-column",children:Object(j.jsxs)("ul",{class:"nav flex-column",children:[Object(j.jsx)("li",{class:"nav-item",children:Object(j.jsx)("span",{class:"footer-title",children:"Quick Links"})}),Object(j.jsx)("li",{class:"nav-item",children:Object(j.jsx)("a",{class:"links",href:"/about",children:"About us"})}),Object(j.jsx)("li",{class:"nav-item",children:Object(j.jsx)("a",{class:"links",href:"/pricing",children:"Pricing"})}),Object(j.jsx)("li",{class:"nav-item",children:Object(j.jsx)("a",{class:"links",href:"/signup",children:"Sign Up"})})]})}),Object(j.jsx)("div",{class:"col-md-4 footer-column",children:Object(j.jsxs)("ul",{class:"nav flex-column",children:[Object(j.jsx)("li",{class:"nav-item",children:Object(j.jsx)("span",{class:"footer-title",children:"Contact & Support"})}),Object(j.jsx)("li",{class:"nav-item",children:Object(j.jsxs)("span",{class:"nav-link",children:[Object(j.jsx)("i",{class:"fas fa-phone"}),"    +47 45 80 80 80"]})}),Object(j.jsx)("li",{class:"nav-item",children:Object(j.jsx)("span",{class:"nav-link",children:"Address"})})]})})]}),Object(j.jsx)("div",{class:"text-center",children:Object(j.jsx)("i",{class:"fas fa-ellipsis-h"})}),Object(j.jsx)("div",{class:"row text-center",children:Object(j.jsx)("span",{class:"copyright quick-links",children:"Copyright \xa9 Psicoworking"})})]})})]})};var pt=function(){var e=ue().isAuth,t=Object(o.f)();Object(c.useEffect)((function(){window.scrollTo(0,0)}),[]);var a=Object(c.useState)(!1),n=Object(l.a)(a,2),s=n[0],r=n[1],i=function(){r(!s)},d=function(){e?t.push("/dashboard"):i()};return Object(j.jsxs)("div",{className:"MainPage",children:[Object(j.jsx)("section",{className:"colored-section",id:"title",children:Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col-lg-6",children:[Object(j.jsx)("h1",{className:"big-heading",children:"Find the perfect room for your consultations."}),Object(j.jsx)("button",{type:"button",className:"btn btn-outline-light btn-lg download-button",onClick:d,children:"Book Now"})]}),Object(j.jsx)("div",{className:"col-lg-6",children:Object(j.jsx)("img",{className:"title-image",src:Ve.roomBeige1,alt:"waiting room img"})})]})})}),Object(j.jsx)("section",{className:"white-section",id:"features",children:Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"feature-box col-lg-4",children:[Object(j.jsx)("i",{className:"icon fas fa-check-circle fa-4x"}),Object(j.jsx)("h3",{className:"feature-title",children:"Easy to use."}),Object(j.jsx)("p",{children:"Book a room for your consult with a couple of clicks."})]}),Object(j.jsxs)("div",{className:"feature-box col-lg-4",children:[Object(j.jsx)("i",{className:"icon fas fa-bullseye fa-4x"}),Object(j.jsx)("h3",{className:"feature-title",children:"Variety of Rooms."}),Object(j.jsx)("p",{children:"We have rooms that fit all your needs."})]}),Object(j.jsxs)("div",{className:"feature-box col-lg-4",children:[Object(j.jsx)("i",{className:"icon fas fa-heart fa-4x"}),Object(j.jsx)("h3",{className:"feature-title",children:"Amenities."}),Object(j.jsx)("p",{children:"All our rooms are equiped with chairs, wifi, air conditioning and more."})]})]})})}),Object(j.jsx)("section",{className:"colored-section",id:"testimonials",children:Object(j.jsxs)("div",{id:"testimonial-carousel",className:"carousel slide","data-ride":"false",children:[Object(j.jsxs)("div",{className:"carousel-inner",children:[Object(j.jsxs)("div",{className:"carousel-item active container-fluid",children:[Object(j.jsx)("h2",{className:"testimonial-text",children:"Room 1"}),Object(j.jsx)("img",{className:"testimonial-image",src:Ve.roomBeige1,alt:"room1"})]}),Object(j.jsxs)("div",{className:"carousel-item container-fluid",children:[Object(j.jsx)("h2",{className:"testimonial-text",children:"Room 2"}),Object(j.jsx)("img",{className:"testimonial-image",src:Ve.roomBlue1,alt:"Room 2"})]}),Object(j.jsxs)("div",{className:"carousel-item container-fluid",children:[Object(j.jsx)("h2",{className:"testimonial-text",children:"Room 3"}),Object(j.jsx)("img",{className:"testimonial-image",src:Ve.roomGreen1,alt:"Room 3"})]})]}),Object(j.jsx)("a",{className:"carousel-control-prev",href:"#testimonial-carousel",role:"button","data-slide":"prev",children:Object(j.jsx)("span",{className:"carousel-control-prev-icon"})}),Object(j.jsx)("a",{className:"carousel-control-next",href:"#testimonial-carousel",role:"button","data-slide":"next",children:Object(j.jsx)("span",{className:"carousel-control-next-icon"})})]})}),Object(j.jsxs)("section",{className:"white-section",id:"pricing",children:[Object(j.jsx)("h2",{className:"section-heading",children:"A Room for Every Psychologist's Needs"}),Object(j.jsx)("p",{children:"Simple and affordable price plans for your and your patients."}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"pricing-column col-lg-4 col-md-6",children:Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)("div",{className:"card-header",children:Object(j.jsx)("h3",{children:"Room 1"})}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h2",{className:"price-text",children:"$20 / hour"}),Object(j.jsx)("p",{children:"Wifi"}),Object(j.jsx)("p",{children:"Air Conditioning"}),Object(j.jsx)("p",{children:"Comfortable chairs"}),Object(j.jsx)("button",{className:"btn btn-lg btn-block btn-dark",type:"button",onClick:d,children:"Book this Room"})]})]})}),Object(j.jsx)("div",{className:"pricing-column col-lg-4 col-md-6",children:Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)("div",{className:"card-header",children:Object(j.jsx)("h3",{children:"Room 2"})}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h2",{className:"price-text",children:"$23 / hour"}),Object(j.jsx)("p",{children:"Wifi"}),Object(j.jsx)("p",{children:"Air Conditioning"}),Object(j.jsx)("p",{children:"Couch and Desk"}),Object(j.jsx)("button",{className:"btn btn-lg btn-block btn-dark",type:"button",onClick:d,children:"Book this Room"})]})]})}),Object(j.jsx)("div",{className:"pricing-column col-lg-4",children:Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)("div",{className:"card-header",children:Object(j.jsx)("h3",{children:"Plan 3"})}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h2",{className:"price-text",children:"$25 / hour"}),Object(j.jsx)("p",{children:"Wifi"}),Object(j.jsx)("p",{children:"Air Conditioning"}),Object(j.jsx)("p",{children:"Comfortable chairs"}),Object(j.jsx)("button",{className:"btn btn-lg btn-block btn-dark",type:"button",onClick:d,children:"Book this Room"})]})]})})]})]}),Object(j.jsx)("section",{className:"colored-section",id:"cta",children:Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("h3",{className:"big-heading",children:"Find the Perfect Office Room for your Needs Today."}),Object(j.jsx)("button",{className:"btn btn-outline-light btn-lg download-button",type:"button",children:"Book Now"})]})}),Object(j.jsx)(le,{showmodal:s,handlemodal:i,redirectTo:"/dashboard/book"}),Object(j.jsx)(xt,{})]})},ft=(a(611),ae((function(e){var t=Object(c.useState)(!1),a=Object(l.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(!1),i=Object(l.a)(r,2),d=i[0],u=i[1],b=ne.c().shape({first_name:ne.e().max(20,"First Name must be 20 characters or less").required("Required"),last_name:ne.e().max(20,"Last Name must be 20 characters or less").required("Required"),crp_no:ne.e().min(8,"Invalid CRP format").required("CRP number is required").matches(/^[0-9]{2}\/[0-9]{5}$/,"Invalid CRP format"),phone:ne.e().min(12,"Phone number is invalid").required("Phone number is required").matches(/^[0-9]{2}-[0-9]{5}-[0-9]{4}$/,"Invalid phone format"),email:ne.e().email("Email is invalid").required("Email is required"),password:ne.e().min(8,"Password must be at least 8 charaters").required("Required").matches(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/,"Password must contain at least 8 characters, 1 uppercase, 1 lowercase, and 1 number."),confirmPassword:ne.e().oneOf([ne.d("password"),null],"Password must match").required("You must confirm your password"),dob:ne.a().required("Required"),city:ne.e().required("Required"),state:ne.e().required("Required"),zip:ne.e().required("Required"),address1:ne.e().required("Required"),address2:ne.e().required("Required")}),O=function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=k.current.values.zip).length>=8)try{C.a.get("https://viacep.com.br/ws/".concat(t,"/json/ ")).then((function(e){if(!e.data.erro){var t=ve.find((function(t){return t.substring(0,2).search(e.data.uf)>=0}));k.current.setFieldValue("city",e.data.localidade),k.current.setFieldValue("state",t),k.current.setFieldValue("address1",e.data.logradouro)}}))}catch(a){console.log(a)}case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=Object(o.f)(),p=Object(c.useState)(!1),f=Object(l.a)(p,2),g=f[0],v=f[1],y=Object(c.useRef)(null),k=Object(c.useRef)();Object(c.useEffect)((function(){g&&(y.current&&y.current.scrollIntoView({behavior:"smooth"}),v(!1))}),[g]);var w=e.setLoadingSpinner,N=function(){var e=Object(h.a)(m.a.mark((function e(t,a){var c,n,s,r,i,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.setFieldError,e.prev=1,w(!0,"Submitting user information..."),e.next=5,C()({method:"post",url:"http://localhost:8080/users",data:t});case 5:(n=e.sent).data=Object(D.a)(Object(D.a)({},n.data),{},{display:!1}),s=n.data,r=s.success,i=s.message,o=s.redirectURL,l=s.type,console.log(n.data),w(!1),r?x.push({pathname:o,state:Object(D.a)(Object(D.a)({},n.data),{},{display:!0})}):"email"===l?(v(!0),c(l,i)):x.push({pathname:o,state:Object(D.a)(Object(D.a)({},n.data),{},{display:!0})}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),w(!1),x.push({pathname:"/signup",state:{message:"Something went wrong",display:!0}});case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(j.jsx)(se.c,{innerRef:k,initialValues:{first_name:"",last_name:"",crp_no:"",phone:"",email:"",password:"",confirmPassword:"",dob:"",zip:"",city:"",state:ve[0],address1:"",address2:""},validationSchema:b,onSubmit:N,children:function(e){return Object(j.jsx)("div",{className:"signup-container",children:Object(j.jsxs)(se.b,{children:[Object(j.jsx)(ie,{formType:"input",label:"First Name",name:"first_name",type:"text"}),Object(j.jsx)(ie,{formType:"input",label:"Last Name",name:"last_name",type:"text"}),Object(j.jsx)(ie,{formType:"input",label:"CRP (region/number)",name:"crp_no",type:"text",maxLength:"8",placeholder:"00/00000",onKeyUp:function(){return function(){var e=k.current.values.crp_no;e.length>1?n||(k.current.setFieldValue("crp_no",e+"/"),s(!0)):s(!1)}()}}),Object(j.jsx)(ie,{formType:"input",label:"Phone",name:"phone",type:"text",maxLength:"13",placeholder:"00-00000-0000",onKeyUp:function(){return function(){var e=k.current.values.phone;2===e.length&&!d||8===e.length&&!d?(k.current.setFieldValue("phone",e+"-"),u(!0)):u(!1)}()}}),Object(j.jsx)(ie,{formType:"input",label:"Email",name:"email",type:"email",placeholder:"example@email.com",myref:y}),Object(j.jsx)(ie,{formType:"input",label:"Password",name:"password",type:"password"}),Object(j.jsx)(ie,{formType:"input",label:"Confirm Password",name:"confirmPassword",type:"password"}),Object(j.jsx)(ie,{formType:"input",label:"Date of Birth",name:"dob",type:"date"}),Object(j.jsxs)("div",{className:"form-row",children:[Object(j.jsx)("div",{className:"form-group col-md-3",children:Object(j.jsx)(ie,{formType:"input",label:"Zip",type:"text",maxLength:"8",name:"zip",onKeyUp:function(e){return O()}})}),Object(j.jsx)("div",{className:"form-group col-md-5",children:Object(j.jsx)(ie,{formType:"input",label:"City",type:"text",maxLength:"30",name:"city"})}),Object(j.jsx)("div",{className:"form-group col-md-4",children:Object(j.jsx)(ie,{label:"State",formType:"select",formData:ve,id:"inputState",className:"form-control",name:"state"})})]}),Object(j.jsx)(ie,{formType:"input",label:"Address",name:"address1",type:"text",placeholder:"Main St"}),Object(j.jsx)(ie,{formType:"input",label:"Address 2",name:"address2",type:"text",placeholder:"Number, Apartment, studio, or floor"}),Object(j.jsx)("button",{className:"btn btn-outline-primary mt-3 mr-4 mb-4",type:"submit",children:"Sign Up"}),Object(j.jsx)("button",{className:"btn btn-outline-danger mt-3 ml-3 mb-4",type:"reset",children:"Reset Form"})]})})}})}))),gt=Object(o.g)((function(e){var t=e.isOpen,a=e.closeModal,n=Object(c.useState)(!1),s=Object(l.a)(n,2),r=s[0],i=s[1],d=Object(c.useState)(!1),u=Object(l.a)(d,2),b=u[0],m=u[1],h=Object(o.f)();return Object(c.useEffect)((function(){h.location.state&&h.location.state.display&&(i(!1),a(),m(!0))}),[h.location,a]),Object(c.useEffect)((function(){i(t)}),[t]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(R.a,{size:"lg",show:r,fullscreen:"lg-down",onHide:function(){i(!1),m(!1),a()},centered:!0,children:[Object(j.jsx)(R.a.Header,{closeButton:!0,children:Object(j.jsx)(R.a.Title,{children:"Enter your information"})}),Object(j.jsx)(R.a.Body,{children:Object(j.jsx)(ft,{})})]}),h.location.state?Object(j.jsxs)(R.a,{size:"lg",show:b,fullscreen:"lg-down",backdrop:"static",keyboard:!1,centered:!0,children:[Object(j.jsx)(R.a.Header,{children:Object(j.jsx)(R.a.Title,{className:"text-secondary",children:h.location.state.message})}),Object(j.jsx)(R.a.Body,{children:h.location.state.success?Object(j.jsx)("p",{children:"You have registered in Psicoworking. You should receive a confirmation email in the next few minutes. We are reviewing your application and you should expect our feedback within 48 hours."}):Object(j.jsx)("p",{children:"We could not proccess your registration at this time. Please, try again or contact us for more information."})}),Object(j.jsx)(R.a.Footer,{className:"justify-content-center",children:Object(j.jsx)(T.a,{variant:"secondary",onClick:function(){return h.push("/")},children:"Continue"})})]}):null]})})),vt=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("h3",{className:"display-6 mb-3 text-secondary",children:"Thank you for choosing us!"}),Object(j.jsxs)("p",{className:"mr-4 ml-2 mb-4 ",children:["In order to provide the best experience to Psicoworking clients, our registration takes two steps. First, you need to complete our sign up form. We will then evaluate all your information. You should receive an email within 48 hours with details about your registration approval."," "]}),Object(j.jsx)(T.a,{className:"btn btn-secondary",onClick:function(){return n(!0)},children:"Proceed to Sign Up"}),Object(j.jsx)(gt,{isOpen:a,closeModal:function(){n(!1)}})]})})},yt=(a(312),ae(ce((function(e){var t=ne.c().shape({email:ne.e().email("Email is invalid").required("Email is required")});Object(c.useEffect)((function(){window.scrollTo(0,0)}),[]);var a=e.setLoadingSpinner,n=e.setModalMessage,s=function(){var e=Object(h.a)(m.a.mark((function e(t){var c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0,"Processing..."),e.prev=1,e.next=4,C.a.post("/authentication/redefine",t);case 4:c=e.sent,s=c.data.success,a(!1),s?n(!0,"Check your email","We have sent a password recover instructions to your email. Please check your inbox.","/"):n(!0,"Something went wrong","We couldn't process your request at this time. Please, try again later."),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),a(!1),n(!0,"Something went wrong","We couldn't process your request at this time. Please, try again later.");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)(se.c,{initialValues:{email:""},validationSchema:t,onSubmit:s,children:function(e){return Object(j.jsxs)("div",{className:"container-fluid w-75",children:[Object(j.jsx)("h3",{className:"display-6 mb-3 text-secondary",children:"Redefine your password"}),Object(j.jsx)("p",{className:"mr-4 ml-2 mb-4 ",children:"Enter the email associated with your account and we'll send an email with instructions to redefine your password."}),Object(j.jsx)(d.a,{className:"pt-2",children:Object(j.jsxs)(se.b,{className:"reset-pass-form",children:[Object(j.jsx)(ie,{formType:"input",label:"Email",name:"email",type:"email",placeholder:"example@email.com"}),Object(j.jsx)("button",{className:"login-form-btn btn btn-block btn-outline-primary mt-3 mb-3 ",type:"submit",children:"Send instructions"})]})})]})}})})))),kt=ae(ce((function(e){var t=Object(c.useState)(),a=Object(l.a)(t,2),n=a[0],s=a[1],r=e.linkId,i=e.setLoadingSpinner,o=e.setModalMessage;Object(c.useEffect)((function(){i(!1);var e=function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("/authentication/redefine/".concat(t));case 3:a=e.sent,console.log(a.data),s(a.data.email),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();e(r)}),[r,i]);var u=ne.c().shape({password:ne.e().min(8,"Password must be at least 8 charaters").required("Required").matches(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/,"Password must contain at least 8 characters, 1 uppercase, 1 lowercase, and 1 number."),confirmPassword:ne.e().oneOf([ne.d("password"),null],"Password must match").required("You must confirm your password")}),b=function(){var e=Object(h.a)(m.a.mark((function e(t){var a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0,"Processing..."),e.prev=1,t.email=n,e.next=5,C.a.patch("/users/redefine_password",{values:t});case 5:a=e.sent,c=a.data.success,i(!1),c?o(!0,"Success","Your password has been redefined. Please, log in into your account using your new password","/"):o(!0,"Something went wrong","We couldn't process your request at this time. Please, try again later."),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),i(!1),o(!0,"Something went wrong","We couldn't process your request at this time. Please, try again later.");case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return n?Object(j.jsx)(se.c,{initialValues:{password:"",confirmPassword:""},validationSchema:u,onSubmit:b,children:function(e){return Object(j.jsxs)("div",{className:"container-fluid w-75",children:[Object(j.jsx)("h3",{className:"display-6 mb-3 text-secondary",children:"Reset your password"}),Object(j.jsx)("p",{className:"mr-4 ml-2 mb-4 ",children:"Please, choose your new password"}),Object(j.jsx)(d.a,{className:"pt-2",children:Object(j.jsxs)(se.b,{className:"reset-pass-form",children:[Object(j.jsx)(ie,{formType:"input",label:"Password",name:"password",type:"password",placeholder:"Enter your new password"}),Object(j.jsx)(ie,{formType:"input",label:"Confirm Password",name:"confirmPassword",type:"password",placeholder:"Confirm your new password"}),Object(j.jsx)("button",{className:"login-form-btn btn btn-block btn-outline-primary mt-3 mb-3 ",type:"submit",children:"Submit"})]})})]})}}):Object(j.jsx)(de,{type:"404"})})));a(612);var wt=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"bg-light",children:Object(j.jsx)("div",{className:"container py-5",children:Object(j.jsxs)("div",{className:"row h-100 align-items-center py-5",children:[Object(j.jsxs)("div",{className:"col-lg-6",children:[Object(j.jsx)("h1",{className:"display-4",children:"About Us"}),Object(j.jsx)("p",{className:"lead text-muted mb-0",children:"Lorem ipsum dolor sit amet"})]}),Object(j.jsxs)("div",{className:"col-lg-6 d-none d-lg-block container-img",children:[Object(j.jsx)("img",{src:Ve.roomView,alt:"",className:" img-fluid"}),Object(j.jsx)("div",{className:"block"})]})]})})}),Object(j.jsx)("div",{className:"bg-white py-5",children:Object(j.jsxs)("div",{className:"container py-5",children:[Object(j.jsxs)("div",{className:"row align-items-center",children:[Object(j.jsx)("div",{className:"col-lg-5 px-5 mx-auto",children:Object(j.jsx)("img",{src:Ve.pri,alt:"",className:"img-fluid mb-4 mb-lg-0"})}),Object(j.jsxs)("div",{className:"col-lg-6",children:[Object(j.jsx)("i",{className:"fa fa-leaf fa-2x mb-3 text-primary"}),Object(j.jsx)("h2",{className:"font-weight-light",children:"Pricila"}),Object(j.jsx)("p",{className:"font-italic text-muted mb-4",children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."})]})]}),Object(j.jsxs)("div",{className:"row align-items-center mb-5",children:[Object(j.jsxs)("div",{className:"col-lg-6 order-2 order-lg-1",children:[Object(j.jsx)("i",{className:"fa fa-bar-chart fa-2x mb-3 text-primary"}),Object(j.jsx)("h2",{className:"font-weight-light",children:"Nathalia"}),Object(j.jsx)("p",{className:"font-italic text-muted mb-4",children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."})]}),Object(j.jsx)("div",{className:"col-lg-5 px-5 mx-auto order-1 order-lg-2",children:Object(j.jsx)("img",{src:Ve.nathalia,alt:"",className:"img-fluid mb-4 mb-lg-0"})})]})]})}),Object(j.jsx)(xt,{})]})};var Nt=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(i.a,{children:[Object(j.jsx)(Ot,{}),Object(j.jsxs)(o.c,{children:[Object(j.jsx)(o.a,{exact:!0,path:"/",children:Object(j.jsx)(pt,{})}),Object(j.jsx)(o.a,{exact:!0,path:"/contact",children:Object(j.jsx)("h2",{className:"m-4 text-secondary",children:"Contact us"})}),Object(j.jsx)(o.a,{exact:!0,path:"/about",children:Object(j.jsx)(wt,{})}),Object(j.jsx)(o.a,{exact:!0,path:"/pricing",children:Object(j.jsx)("h2",{className:"m-4 text-secondary",children:"Pricing"})}),Object(j.jsx)(o.a,{exact:!0,path:"/signup",children:Object(j.jsx)(vt,{})}),Object(j.jsx)(o.a,{exact:!0,path:"/redefine",children:Object(j.jsx)(yt,{})}),Object(j.jsx)(o.a,{exact:!0,path:"/redefine/:linkId",render:function(e){return Object(j.jsx)(kt,{linkId:e.match.params.linkId})}}),Object(j.jsx)(o.a,{path:"/dashboard",component:bt}),Object(j.jsxs)(o.a,{path:"/*",children:[Object(j.jsx)("div",{children:"PUBLIC ERROR"}),Object(j.jsx)(de,{})]})]})]})})};r.a.render(Object(j.jsx)(Nt,{}),document.getElementById("root"))}},[[613,1,2]]]);
//# sourceMappingURL=main.d7b6d268.chunk.js.map